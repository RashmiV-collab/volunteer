import{r as O,aV as z,bg as yt,_ as He,l as Q,v as bt,j as m,a4 as ht,ar as xt}from"./main.js";import{B as ge,r as Tt,d as ke,n as Et,T as St,$ as _t,j as wt}from"./MetaData-bdfb949d.js";import{P as ne}from"./DialogContent-0fdbfaca.js";import{g as jt,h as Ot}from"./index.esm-df7700a0.js";import{e as Rt}from"./Actions-b625cbe1.js";import{C as Ct}from"./ConfirmDialog-c5a9ed7e.js";import{B as ye}from"./Button-e7d59fde.js";import{P as At}from"./Select-2486f905.js";import{T as Lt,I as Pt}from"./iconBase-8840166b.js";import{R as Bt}from"./RadioGroup-04724101.js";import{F as J}from"./FormControlLabel-b874e6c1.js";import{R as $}from"./Radio-4f834152.js";import"./DialogTitle-3605c73e.js";import"./FormHelperText-d043b602.js";import"./FormControl-5d7bce62.js";import"./createSvgIcon-d0cfe483.js";function re(e){if(typeof window>"u")return e;const t=O.useRef(null);return O.useLayoutEffect(()=>{t.current=e}),O.useCallback((...a)=>{var l;(l=t.current)===null||l===void 0||l.call(t,...a)},[])}const Fe={};function kt(e,t){Fe[e]||(Fe[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}const Ft={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1};function Nt({parentPopupState:e,popupId:t,variant:a,disableAutoFocus:l}){const u=O.useRef(!0);O.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const[v,y]=O.useState(Ft),s=O.useCallback(d=>{u.current&&y(d)},[]),w=O.useCallback(d=>s(i=>({...i,setAnchorElUsed:!0,anchorEl:d??void 0})),[]),c=re(d=>(v.isOpen?f(d):p(d),v)),p=re(d=>{const i=d instanceof Element?void 0:d,E=d instanceof Element?d:(d==null?void 0:d.currentTarget)instanceof Element?d.currentTarget:void 0;if((i==null?void 0:i.type)==="touchstart"){s(C=>({...C,_deferNextOpen:!0}));return}const M=i==null?void 0:i.clientX,D=i==null?void 0:i.clientY,K=typeof M=="number"&&typeof D=="number"?{left:M,top:D}:void 0,G=C=>{if(!d&&!C.setAnchorElUsed&&a!=="dialog"&&kt("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),e){if(!e.isOpen)return C;setTimeout(()=>e._setChildPopupState(L))}const T={...C,isOpen:!0,anchorPosition:K,hovered:(i==null?void 0:i.type)==="mouseover"||C.hovered,focused:(i==null?void 0:i.type)==="focus"||C.focused,_openEventType:i==null?void 0:i.type};return i!=null&&i.currentTarget?C.setAnchorElUsed||(T.anchorEl=i==null?void 0:i.currentTarget):E&&(T.anchorEl=E),T};s(C=>C._deferNextOpen?(setTimeout(()=>s(G),0),{...C,_deferNextOpen:!1}):G(C))}),h=d=>{const{_childPopupState:i}=d;return setTimeout(()=>{i==null||i.close(),e==null||e._setChildPopupState(null)}),{...d,isOpen:!1,hovered:!1,focused:!1}},f=re(d=>{const i=d instanceof Element?void 0:d;if((i==null?void 0:i.type)==="touchstart"){s(E=>({...E,_deferNextClose:!0}));return}s(E=>E._deferNextClose?(setTimeout(()=>s(h),0),{...E,_deferNextClose:!1}):h(E))}),j=O.useCallback((d,i)=>{d?p(i):f(i)},[]),H=re(d=>{const{relatedTarget:i}=d;s(E=>E.hovered&&!(i instanceof Element&&be(i,L))?E.focused?{...E,hovered:!1}:h(E):E)}),R=re(d=>{if(!d)return;const{relatedTarget:i}=d;s(E=>E.focused&&!(i instanceof Element&&be(i,L))?E.hovered?{...E,focused:!1}:h(E):E)}),x=O.useCallback(d=>s(i=>({...i,_childPopupState:d})),[]),L={...v,setAnchorEl:w,popupId:t,variant:a,open:p,close:f,toggle:c,setOpen:j,onBlur:R,onMouseLeave:H,disableAutoFocus:l??!!(v.hovered||v.focused),_setChildPopupState:x};return L}function Mt({isOpen:e,popupId:t,variant:a}){return{...a==="popover"?{"aria-haspopup":!0,"aria-controls":e&&t!=null?t:void 0}:a==="popper"?{"aria-describedby":e&&t!=null?t:void 0}:void 0}}function It(e){return{...Mt(e),onClick:e.open,onTouchStart:e.open}}function Ut({isOpen:e,anchorEl:t,anchorPosition:a,close:l,popupId:u,onMouseLeave:v,disableAutoFocus:y,_openEventType:s}){return{id:u,anchorEl:t,anchorPosition:a,anchorReference:s==="contextmenu"?"anchorPosition":"anchorEl",open:e,onClose:l,onMouseLeave:v,...y&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0}}}function Ht(e,{popupId:t}){if(!t)return null;const a=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof a.getElementById=="function"?a.getElementById(t):null}function be(e,t){const{anchorEl:a,_childPopupState:l}=t;return Ne(a,e)||Ne(Ht(e,t),e)||l!=null&&be(e,l)}function Ne(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}function qe({children:e,popupId:t,variant:a,parentPopupState:l,disableAutoFocus:u}){const v=Nt({popupId:t,variant:a,parentPopupState:l,disableAutoFocus:u}),y=e(v);return y??null}qe.propTypes={children:ne.func.isRequired,popupId:ne.string,variant:ne.oneOf(["popover","popper"]).isRequired,parentPopupState:ne.object,disableAutoFocus:ne.bool};var qt={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},Dt=`\r
`,Xt="\uFEFF",he=e=>Object.assign({},qt,e);class Jt extends Error{constructor(t){super(t),this.name="CsvGenerationError"}}class $t extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}}class Kt extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}}var ae=e=>e,I=e=>e,ue=ae,oe=ae,Me=ae,Ie=ae,Gt=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},Wt=e=>Me(typeof e=="object"?e.key:e),Vt=e=>Ie(typeof e=="object"?e.displayLabel:e),Yt=(e,...t)=>t.reduce((a,l)=>l(a),e),zt=e=>t=>e.useBom?ue(I(t)+Xt):t,Qt=e=>t=>e.showTitle?ue(I(t)+e.title):t,De=e=>t=>ue(I(e)+I(t)+Dt),Xe=e=>(t,a)=>Zt(e)(oe(t+a)),Zt=e=>t=>ae(I(t)+e.fieldSeparator),en=(e,t)=>a=>{if(!e.showColumnHeaders)return a;if(t.length<1)throw new $t("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let l=oe("");for(let u=0;u<t.length;u++){const v=Vt(t[u]);l=Xe(e)(l,Je(e,v))}return l=oe(I(l).slice(0,-1)),De(a)(l)},tn=(e,t,a)=>l=>{let u=l;for(var v=0;v<a.length;v++){let y=oe("");for(let s=0;s<t.length;s++){const w=Wt(t[s]),c=typeof a[v][I(w)]>"u"?e.replaceUndefinedWith:a[v][I(w)];y=Xe(e)(y,Je(e,c))}y=oe(I(y).slice(0,-1)),u=De(u)(y)}return u},Ue=e=>+e===e&&(!isFinite(e)||!!(e%1)),Je=(e,t)=>{if(e.decimalSeparator==="locale"&&Ue(t))return t.toLocaleString();if(e.decimalSeparator!=="."&&Ue(t))return t.toString().replace(".",e.decimalSeparator);if(typeof t=="string"){let a=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(a=e.quoteCharacter+Gt(t,e.quoteCharacter)+e.quoteCharacter),a}if(typeof t=="boolean"&&e.boolDisplay){const a=t?"true":"false";return e.boolDisplay[a]}return t},nn=e=>t=>{const a=he(e),l=a.useKeysAsHeaders?Object.keys(t[0]):a.columnHeaders;let u=Yt(ue(""),zt(a),Qt(a),en(a,l),tn(a,l,t));if(I(u).length<1)throw new Jt("Output is empty. Is your data formatted correctly?");return u},rn=e=>t=>{if(!window)throw new Kt("Downloading only supported in a browser environment.");const a=he(e),l=I(t),u=a.useTextFile?"plain":"csv",v=a.useTextFile?"txt":"csv";let y=new Blob([l],{type:`text/${u};charset=utf8;`}),s=document.createElement("a");s.download=`${a.filename}.${v}`,s.href=URL.createObjectURL(y),s.setAttribute("visibility","hidden"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},$e={};(function(e){(function(t,a){a(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:z,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.toXML=void 0;function a(o){return v(o)||u(o)||h(o)||l()}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function v(o){if(Array.isArray(o))return f(o)}function y(o,n){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(o);n&&(b=b.filter(function(_){return Object.getOwnPropertyDescriptor(o,_).enumerable})),r.push.apply(r,b)}return r}function s(o){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?y(Object(r),!0).forEach(function(b){w(o,b,r[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(b){Object.defineProperty(o,b,Object.getOwnPropertyDescriptor(r,b))})}return o}function w(o,n,r){return n in o?Object.defineProperty(o,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[n]=r,o}function c(o,n){return H(o)||j(o,n)||h(o,n)||p()}function p(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(o,n){if(o){if(typeof o=="string")return f(o,n);var r=Object.prototype.toString.call(o).slice(8,-1);if(r==="Object"&&o.constructor&&(r=o.constructor.name),r==="Map"||r==="Set")return Array.from(o);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(o,n)}}function f(o,n){(n==null||n>o.length)&&(n=o.length);for(var r=0,b=new Array(n);r<n;r++)b[r]=o[r];return b}function j(o,n){var r=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(r!=null){var b=[],_=!0,A=!1,P,B;try{for(r=r.call(o);!(_=(P=r.next()).done)&&(b.push(P.value),!(n&&b.length===n));_=!0);}catch(U){A=!0,B=U}finally{try{!_&&r.return!=null&&r.return()}finally{if(A)throw B}}return b}}function H(o){if(Array.isArray(o))return o}function R(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(r){return typeof r}:R=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R(o)}var x={ARRAY:"array",BOOLEAN:"boolean",DATE:"date",FUNCTION:"function",JSTOXML_OBJECT:"jstoxml-object",NULL:"null",NUMBER:"number",OBJECT:"object",STRING:"string"},L=[x.STRING,x.NUMBER,x.BOOLEAN],d='<?xml version="1.0" encoding="UTF-8"?>',i=["_selfCloseTag","_attrs"],E=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return n.repeat(r)},M=function(n){return Array.isArray(n)&&x.ARRAY||R(n)===x.OBJECT&&n!==null&&n._name&&x.JSTOXML_OBJECT||n instanceof Date&&x.DATE||n===null&&x.NULL||R(n)},D=function(n){return n.startsWith("<![CDATA[")},K=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=arguments.length>2?arguments[2]:void 0,_=n;if(R(n)===x.STRING){if(D(n))return n;var A=new RegExp("(".concat(Object.keys(r).join("|"),")(?!(\\w|#)*;)"),"g");_=String(n).replace(A,function(P,B){return r[B]||""})}return typeof b=="function"?b(_):_},G=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,b=arguments.length>2?arguments[2]:void 0,_=arguments.length>3?arguments[3]:void 0,A=Array.isArray(n)?n:Object.entries(n).map(function(P){var B=c(P,2),U=B[0],X=B[1];return w({},U,X)});return A.reduce(function(P,B){var U=Object.keys(B)[0],X=B[U];if(R(b)===x.FUNCTION){var se=b(U,X);if(se)return P}var W=r?K(X,r):X,ce=!_&&W===!0?"":'="'.concat(W,'"');return P.push("".concat(U).concat(ce)),P},[])},C=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,b=arguments.length>2?arguments[2]:void 0,_=arguments.length>3?arguments[3]:void 0,A=G(n,r,b,_);if(A.length===0)return"";var P=A.join(" ");return" ".concat(P)},T=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).map(function(r){return{_name:r,_content:n[r]}})},g=function(n){return L.includes(M(n))},S=function(n){return!n.match("<")},F=function(n){var r=n.header,b=n.isOutputStart,_=r&&b;if(!_)return"";var A=R(r)===x.BOOLEAN;return A?d:r},N={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"},ie=function o(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=r.depth,_=b===void 0?0:b,A=r.indent,P=r._isFirstItem,B=r._isOutputStart,U=B===void 0?!0:B,X=r.header,se=r.attributeReplacements,W=se===void 0?{}:se,ce=r.attributeFilter,xe=r.attributeExplicitTrue,We=xe===void 0?!1:xe,Te=r.contentReplacements,fe=Te===void 0?{}:Te,Ee=r.contentMap,Se=r.selfCloseTags,Ve=Se===void 0?!0:Se,Ye=typeof W=="boolean"&&!W,ze=Ye?{}:s(s({},N),W),Qe=typeof fe=="boolean"&&!fe,Ze=Qe?{}:s(s({},N),fe),_e=typeof A=="string",de=E(A,_),et=M(n),we=F({header:X,indent:A,depth:_,isOutputStart:U}),le=U&&!we&&P&&_===0,je=_e&&!le?`
`:"",q="";switch(et){case x.JSTOXML_OBJECT:{var V=n._name,Y=n._content;if(Y===null&&typeof Ee!="function"){q="".concat(je).concat(de).concat(V);break}var tt=Array.isArray(Y)&&Y.every(g);if(tt){var nt=Y.map(function(k){return o({_name:V,_content:k},s(s({},r),{},{depth:_,_isOutputStart:!1}))});return nt.join("")}if(i.includes(V))break;var Z=o(Y,s(s({},r),{},{depth:_+1,_isOutputStart:le})),rt=M(Z),ot=S(Z),at=D(Z),Oe="".concat(je).concat(de);if(V==="_comment"){q+="".concat(Oe,"<!-- ").concat(Y," -->");break}var Re=rt==="undefined"||Z==="",it=Ve,Ce=n._selfCloseTag,Ae=R(Ce)===x.BOOLEAN?Re&&Ce:Re&&it,st=Ae?"/":"",lt=C(n._attrs,ze,ce,We),ut="<".concat(V).concat(lt).concat(st,">"),ct=_e&&!ot&&!at?`
`.concat(de):"",ft=Ae?"":"".concat(Z).concat(ct,"</").concat(V,">");q+="".concat(Oe).concat(ut).concat(ft);break}case x.OBJECT:{var Le=Object.keys(n),dt=Le.map(function(k,ee){var pe=s(s({},r),{},{_isFirstItem:ee===0,_isLastItem:ee+1===Le.length,_isOutputStart:le}),te={_name:k};if(M(n[k])===x.OBJECT){i.forEach(function(me){var Be=n[k][me];typeof Be<"u"&&(te[me]=Be,delete n[k][me])});var vt=typeof n[k]._content<"u";if(vt&&Object.keys(n[k]).length>1){var Pe=Object.assign({},n[k]);delete Pe._content,te._content=[].concat(a(T(Pe)),[n[k]._content])}}typeof te._content>"u"&&(te._content=n[k]);var gt=o(te,pe);return gt},r);q=dt.join("");break}case x.FUNCTION:{var pt=n(r);q=o(pt,r);break}case x.ARRAY:{var mt=n.map(function(k,ee){var pe=s(s({},r),{},{_isFirstItem:ee===0,_isLastItem:ee+1===n.length,_isOutputStart:le});return o(k,pe)});q=mt.join("");break}default:{q=K(n,Ze,Ee);break}}return"".concat(we).concat(q)};t.toXML=ie;var Ge={toXML:ie};t.default=Ge})})($e);var Ke={exports:{}};(function(e,t){(function(a,l){l()})(z,function(){function a(c,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function l(c,p,h){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){w(f.response,p,h)},f.onerror=function(){console.error("could not download file")},f.send()}function u(c){var p=new XMLHttpRequest;p.open("HEAD",c,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function v(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(p)}}var y=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof z=="object"&&z.global===z?z:void 0,s=y.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),w=y.saveAs||(typeof window!="object"||window!==y?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(c,p,h){var f=y.URL||y.webkitURL,j=document.createElement("a");p=p||c.name||"download",j.download=p,j.rel="noopener",typeof c=="string"?(j.href=c,j.origin===location.origin?v(j):u(j.href)?l(c,p,h):v(j,j.target="_blank")):(j.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(j.href)},4e4),setTimeout(function(){v(j)},0))}:"msSaveOrOpenBlob"in navigator?function(c,p,h){if(p=p||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(a(c,h),p);else if(u(c))l(c,p,h);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){v(f)})}}:function(c,p,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return l(c,p,h);var j=c.type==="application/octet-stream",H=/constructor/i.test(y.HTMLElement)||y.safari,R=/CriOS\/[\d]+/.test(navigator.userAgent);if((R||j&&H||s)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var i=x.result;i=R?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=i:location=i,f=null},x.readAsDataURL(c)}else{var L=y.URL||y.webkitURL,d=L.createObjectURL(c);f?f.location=d:location.href=d,f=null,setTimeout(function(){L.revokeObjectURL(d)},4e4)}});y.saveAs=w.saveAs=w,e.exports=w})})(Ke);var on=Ke.exports;const ve=yt(on),an=O.lazy(()=>He(()=>import("./ExportPdf-90e99550.js"),["./ExportPdf-90e99550.js","./main.js","./main-a9f78bc8.css"],import.meta.url)),sn=O.lazy(()=>He(()=>import("./ExportExcel-5e57af60.js"),["./ExportExcel-5e57af60.js","./main.js","./main-a9f78bc8.css"],import.meta.url)),ln=({table:e,appId:t,dbs:a,tbl:l,metaData:u,bulkActions:v,refetch:y})=>{Q.debug(t,a,l,u);const[s,w]=O.useState("pdf"),[c,p]=O.useState(!1),h=O.useMemo(()=>bt(),[]),f=e.getSelectedRowModel().rows,j=e.getAllColumns(),H=he({filename:t,fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),R=T=>{const g={};if(u.primary_key&&Array.isArray(u.primary_key))for(let S=0;S<u.primary_key.length;S++){const F=u.primary_key[S];g[F]=T[F]}return g},x=T=>{var g,S,F;for(let N=0;N<((g=u==null?void 0:u.columns)==null?void 0:g.length);N++)if(((S=u==null?void 0:u.columns[N])==null?void 0:S.column_name)===T)return(F=u==null?void 0:u.columns[N])==null?void 0:F.data_type;return"varchar"},L=O.useRef(),d=async()=>{L.current&&L.current.exportFile(f,j,t)},i=()=>{const T=f.map(S=>S.original),g=nn(H)(T);rn(H)(g)},E=()=>{const T=f.map(g=>g.original);ve(new Blob([JSON.stringify(T)],{type:"text/json;charset=utf-8"}),t+".json")},M=O.useRef(),D=()=>{M.current&&M.current.exportFile(f,t)},K=()=>{const T=f.map(S=>({row:S.original})),g=$e.toXML({table:T});ve(new Blob([g],{type:"text/plain;charset=utf-8"}),t+".xml")},G=()=>{const T=f.map(S=>S.original);let g="insert into "+l+" (";for(const S in T[0])g+=S+",";g=g.slice(0,-1)+") values ";for(let S=0;S<T.length;S++){const F=T[S];g+="(";for(const N in F){const ie=Tt(x(N));F[N]===null?g+="null,":ie==="number"?g+=F[N]+",":g+="'"+F[N]+"',"}g=g.slice(0,-1),g+="),"}g=g.slice(0,-1)+";",ve(new Blob([g],{type:"text/plain;charset=utf-8"}),t+".sql")},C=()=>{const T=f.map(g=>g.original);for(let g=0;g<T.length;g++){const S=R(T[g]);Rt(a,l,S,function(){y()})}};return m.jsxs(m.Fragment,{children:[m.jsx(qe,{variant:"popover",popupId:h,children:T=>m.jsxs(ge,{children:[m.jsx(ye,{variant:"contained",endIcon:m.jsx(jt,{}),...It(T),children:"Bulk Actions"}),m.jsx(At,{...Ut(T),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:m.jsxs(ge,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[f.length===0&&m.jsx(Lt,{sx:{textAlign:"center",marginTop:"10px"},children:"No rows selected"}),m.jsxs(Bt,{value:s,onChange:(g,S)=>{w(S),g.stopPropagation()},children:[v.pdf&&m.jsx(J,{value:"pdf",label:"Export to PDF",control:m.jsx($,{})}),v.csv&&m.jsx(J,{value:"csv",label:"Export to CSV",control:m.jsx($,{})}),v.json&&m.jsx(J,{value:"json",label:"Export to JSON",control:m.jsx($,{})}),v.excel&&m.jsx(J,{value:"excel",label:"Export to Excel",control:m.jsx($,{})}),v.xml&&m.jsx(J,{value:"xml",label:"Export to XML",control:m.jsx($,{})}),v.sql&&m.jsx(J,{value:"sql",label:"Export to SQL",control:m.jsx($,{})}),v.delete&&m.jsx(J,{value:"delete",label:"Delete permanently",control:m.jsx($,{})})]}),m.jsx(ye,{variant:"contained",onClick:()=>{switch(s){case"pdf":d();break;case"csv":i();break;case"json":E();break;case"excel":D();break;case"xml":K();break;case"sql":G();break;case"delete":p(!0);break}},disabled:f.length===0,children:"Apply"})]})})]})}),m.jsx(Ct,{title:"Delete selected row?",message:"Are you sure you want to delete the selected row? This action cannot be undone!",open:c,setOpen:p,onConfirm:()=>{C()}}),m.jsx(O.Suspense,{children:m.jsx(an,{ref:L})}),m.jsx(O.Suspense,{children:m.jsx(sn,{ref:M})})]})},wn=({table:e,metaData:t,appId:a,dbs:l,tbl:u,refetch:v,showForm:y})=>{Q.debug(t,a,u);const s=ke(h=>ht(h,a));Q.debug("storeTableSettings",s);const w=ke(h=>xt(h,a));Q.debug("bulkActions",w);let c=!1;for(const h in w)c=c||w[h]===!0;Q.debug("bulkActionsEnabled",c);const p=!Et(t)&&!t.table_type.toLowerCase().includes("view")&&c;return Q.debug("hasBulkActions",p),m.jsxs(ge,{sx:{display:"flex",flexWrap:"nowrap",gap:"8px",alignItems:"center"},className:"ppToolbarButtons",children:[m.jsx(St,{arrow:!0,title:"Refresh Table",className:"ppToolbarRefreshIcon",children:m.jsx(Pt,{onClick:()=>v(),children:m.jsx(_t,{})})}),s.transactions.insert&&m.jsx(ye,{variant:"contained",startIcon:m.jsx(Ot,{}),onClick:()=>{y(null,wt.INSERT)},children:"New Record"}),p&&m.jsx(ln,{table:e,appId:a,dbs:l,tbl:u,metaData:t,bulkActions:w,refetch:v})]})};export{wn as default};
