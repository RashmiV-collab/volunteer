var At=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var i=(t,e,s)=>(At(t,e,"read from private field"),s?s.call(t):e.get(t)),c=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},o=(t,e,s,r)=>(At(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);var yt=(t,e,s,r)=>({set _(n){o(t,e,n,s)},get _(){return i(t,e,r)}}),v=(t,e,s)=>(At(t,e,"access private method"),s);import{r as C,_ as Gt,l as A,V as Js,W as Xs,a4 as Ys,ar as ei,as as ti,C as si,at as ys,j as f,au as Mt,a9 as ii}from"./main.js";import{u as ri,a as ni,b as ai,c as oi,M as ui}from"./index.esm-8e0efb65.js";import{d as Dt,n as Qe,p as li,q as ci,r as hi,T as bs,s as vs,i as Je,t as di}from"./MetaData-bdfb949d.js";import{C as fi}from"./ComputedFieldTypeEnum-9a013b11.js";import{g as Cs}from"./LanguagesSupport-f1bbac94.js";import{F as mi,a as pi,b as gi,c as yi,d as bi}from"./index.esm-ebe5ee0d.js";import{i as vi}from"./isEqual-956f3fe4.js";import{u as jt}from"./useMobilePicker-c4cfadfc.js";import{i as Ci}from"./iconBase-8840166b.js";import"./createSvgIcon-d0cfe483.js";import"./Select-2486f905.js";import"./FormHelperText-d043b602.js";import"./FormControl-5d7bce62.js";import"./Button-e7d59fde.js";import"./TextField-0f586f77.js";import"./MenuItem-13e93691.js";import"./Switch-9746da4d.js";import"./Close-9e29875c.js";import"./Chip-505aa5a1.js";import"./FormControlLabel-b874e6c1.js";import"./InputAdornment-cdfef043.js";import"./Radio-4f834152.js";import"./Checkbox-936eee09.js";import"./AlertTitle-902c49a6.js";import"./DialogContent-0fdbfaca.js";import"./DialogTitle-3605c73e.js";import"./Divider-04519c21.js";import"./DatePicker-aa62f03a.js";import"./dateViewRenderers-8287ebc5.js";import"./dayjs.min-b4f908d3.js";var dt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$e=typeof window>"u"||"Deno"in window;function te(){}function wi(t,e){return typeof t=="function"?t(e):t}function It(t){return typeof t=="number"&&t>=0&&t!==1/0}function Us(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ws(t,e){const{type:s="all",exact:r,fetchStatus:n,predicate:u,queryKey:h,stale:p}=t;if(h){if(r){if(e.queryHash!==Wt(h,e.options))return!1}else if(!et(e.queryKey,h))return!1}if(s!=="all"){const w=e.isActive();if(s==="active"&&!w||s==="inactive"&&w)return!1}return!(typeof p=="boolean"&&e.isStale()!==p||typeof n<"u"&&n!==e.state.fetchStatus||u&&!u(e))}function Ss(t,e){const{exact:s,status:r,predicate:n,mutationKey:u}=t;if(u){if(!e.options.mutationKey)return!1;if(s){if(Ye(e.options.mutationKey)!==Ye(u))return!1}else if(!et(e.options.mutationKey,u))return!1}return!(r&&e.state.status!==r||n&&!n(e))}function Wt(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ye)(t)}function Ye(t){return JSON.stringify(t,(e,s)=>kt(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function et(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(s=>!et(t[s],e[s])):!1}function Ns(t,e){if(t===e)return t;const s=Ps(t)&&Ps(e);if(s||kt(t)&&kt(e)){const r=s?t.length:Object.keys(t).length,n=s?e:Object.keys(e),u=n.length,h=s?[]:{};let p=0;for(let w=0;w<u;w++){const R=s?w:n[w];h[R]=Ns(t[R],e[R]),h[R]===t[R]&&p++}return r===u&&p===r?t:h}return e}function Lt(t,e){if(t&&!e||e&&!t)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function Ps(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function kt(t){if(!Fs(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const s=e.prototype;return!(!Fs(s)||!s.hasOwnProperty("isPrototypeOf"))}function Fs(t){return Object.prototype.toString.call(t)==="[object Object]"}function _s(t){return new Promise(e=>{setTimeout(e,t)})}function xs(t){_s(0).then(t)}function Ut(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Ns(t,e):e}function Si(t){return t}function Pi(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function Fi(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var Se,pe,Ie,Ts,xi=(Ts=class extends dt{constructor(){super();c(this,Se,void 0);c(this,pe,void 0);c(this,Ie,void 0);o(this,Ie,e=>{if(!$e&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,pe)||this.setEventListener(i(this,Ie))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,pe))==null||e.call(this),o(this,pe,void 0))}setEventListener(e){var s;o(this,Ie,e),(s=i(this,pe))==null||s.call(this),o(this,pe,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){i(this,Se)!==e&&(o(this,Se,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof i(this,Se)=="boolean"?i(this,Se):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Se=new WeakMap,pe=new WeakMap,Ie=new WeakMap,Ts),vt=new xi,Le,ge,ke,As,Ri=(As=class extends dt{constructor(){super();c(this,Le,!0);c(this,ge,void 0);c(this,ke,void 0);o(this,ke,e=>{if(!$e&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,ge)||this.setEventListener(i(this,ke))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,ge))==null||e.call(this),o(this,ge,void 0))}setEventListener(e){var s;o(this,ke,e),(s=i(this,ge))==null||s.call(this),o(this,ge,e(this.setOnline.bind(this)))}setOnline(e){i(this,Le)!==e&&(o(this,Le,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return i(this,Le)}},Le=new WeakMap,ge=new WeakMap,ke=new WeakMap,As),Ct=new Ri;function Oi(t){return Math.min(1e3*2**t,3e4)}function St(t){return(t??"online")==="online"?Ct.isOnline():!0}var qs=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Qt(t){return t instanceof qs}function Bs(t){let e=!1,s=0,r=!1,n,u,h;const p=new Promise((m,y)=>{u=m,h=y}),w=m=>{var y;r||(g(new qs(m)),(y=t.abort)==null||y.call(t))},R=()=>{e=!0},d=()=>{e=!1},D=()=>!vt.isFocused()||t.networkMode!=="always"&&!Ct.isOnline(),j=m=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,m),n==null||n(),u(m))},g=m=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,m),n==null||n(),h(m))},S=()=>new Promise(m=>{var y;n=k=>{const O=r||!D();return O&&m(k),O},(y=t.onPause)==null||y.call(t)}).then(()=>{var m;n=void 0,r||(m=t.onContinue)==null||m.call(t)}),L=()=>{if(r)return;let m;try{m=t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(j).catch(y=>{var V;if(r)return;const k=t.retry??($e?0:3),O=t.retryDelay??Oi,_=typeof O=="function"?O(s,y):O,G=k===!0||typeof k=="number"&&s<k||typeof k=="function"&&k(s,y);if(e||!G){g(y);return}s++,(V=t.onFail)==null||V.call(t,s,y),_s(_).then(()=>{if(D())return S()}).then(()=>{e?g(y):L()})})};return St(t.networkMode)?L():S().then(L),{promise:p,cancel:w,continue:()=>(n==null?void 0:n())?p:Promise.resolve(),cancelRetry:R,continueRetry:d}}function Ei(){let t=[],e=0,s=d=>{d()},r=d=>{d()};const n=d=>{let D;e++;try{D=d()}finally{e--,e||p()}return D},u=d=>{e?t.push(d):xs(()=>{s(d)})},h=d=>(...D)=>{u(()=>{d(...D)})},p=()=>{const d=t;t=[],d.length&&xs(()=>{r(()=>{d.forEach(D=>{s(D)})})})};return{batch:n,batchCalls:h,schedule:u,setNotifyFunction:d=>{s=d},setBatchNotifyFunction:d=>{r=d}}}var z=Ei(),Pe,Ms,Vs=(Ms=class{constructor(){c(this,Pe,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),It(this.gcTime)&&o(this,Pe,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??($e?1/0:5*60*1e3))}clearGcTimeout(){i(this,Pe)&&(clearTimeout(i(this,Pe)),o(this,Pe,void 0))}},Pe=new WeakMap,Ms),Ue,Ne,X,ye,Y,K,tt,Fe,_e,bt,ne,he,Ds,Ti=(Ds=class extends Vs{constructor(e){super();c(this,_e);c(this,ne);c(this,Ue,void 0);c(this,Ne,void 0);c(this,X,void 0);c(this,ye,void 0);c(this,Y,void 0);c(this,K,void 0);c(this,tt,void 0);c(this,Fe,void 0);o(this,Fe,!1),o(this,tt,e.defaultOptions),v(this,_e,bt).call(this,e.options),o(this,K,[]),o(this,X,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,o(this,Ue,e.state||Ai(this.options)),this.state=i(this,Ue),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!i(this,K).length&&this.state.fetchStatus==="idle"&&i(this,X).remove(this)}setData(e,s){const r=Ut(this.state.data,e,this.options);return v(this,ne,he).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){v(this,ne,he).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r;const s=i(this,ye);return(r=i(this,Y))==null||r.cancel(e),s?s.then(te).catch(te):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,Ue))}isActive(){return i(this,K).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||i(this,K).some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Us(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=i(this,K).find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,Y))==null||s.continue()}onOnline(){var s;const e=i(this,K).find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=i(this,Y))==null||s.continue()}addObserver(e){i(this,K).includes(e)||(i(this,K).push(e),this.clearGcTimeout(),i(this,X).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){i(this,K).includes(e)&&(o(this,K,i(this,K).filter(s=>s!==e)),i(this,K).length||(i(this,Y)&&(i(this,Fe)?i(this,Y).cancel({revert:!0}):i(this,Y).cancelRetry()),this.scheduleGc()),i(this,X).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return i(this,K).length}invalidate(){this.state.isInvalidated||v(this,ne,he).call(this,{type:"invalidate"})}fetch(e,s){var R,d,D,j;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(i(this,ye))return(R=i(this,Y))==null||R.continueRetry(),i(this,ye)}if(e&&v(this,_e,bt).call(this,e),!this.options.queryFn){const g=i(this,K).find(S=>S.options.queryFn);g&&v(this,_e,bt).call(this,g.options)}const r=new AbortController,n={queryKey:this.queryKey,meta:this.meta},u=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(o(this,Fe,!0),r.signal)})};u(n);const h=()=>this.options.queryFn?(o(this,Fe,!1),this.options.persister?this.options.persister(this.options.queryFn,n,this):this.options.queryFn(n)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),p={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:h};u(p),(d=this.options.behavior)==null||d.onFetch(p,this),o(this,Ne,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((D=p.fetchOptions)==null?void 0:D.meta))&&v(this,ne,he).call(this,{type:"fetch",meta:(j=p.fetchOptions)==null?void 0:j.meta});const w=g=>{var S,L,m,y;Qt(g)&&g.silent||v(this,ne,he).call(this,{type:"error",error:g}),Qt(g)||((L=(S=i(this,X).config).onError)==null||L.call(S,g,this),(y=(m=i(this,X).config).onSettled)==null||y.call(m,this.state.data,g,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return o(this,Y,Bs({fn:p.fetchFn,abort:r.abort.bind(r),onSuccess:g=>{var S,L,m,y;if(typeof g>"u"){w(new Error(`${this.queryHash} data is undefined`));return}this.setData(g),(L=(S=i(this,X).config).onSuccess)==null||L.call(S,g,this),(y=(m=i(this,X).config).onSettled)==null||y.call(m,g,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:w,onFail:(g,S)=>{v(this,ne,he).call(this,{type:"failed",failureCount:g,error:S})},onPause:()=>{v(this,ne,he).call(this,{type:"pause"})},onContinue:()=>{v(this,ne,he).call(this,{type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode})),o(this,ye,i(this,Y).promise),i(this,ye)}},Ue=new WeakMap,Ne=new WeakMap,X=new WeakMap,ye=new WeakMap,Y=new WeakMap,K=new WeakMap,tt=new WeakMap,Fe=new WeakMap,_e=new WeakSet,bt=function(e){this.options={...i(this,tt),...e},this.updateGcTime(this.options.gcTime)},ne=new WeakSet,he=function(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:St(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Qt(n)&&n.revert&&i(this,Ne)?{...i(this,Ne),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),z.batch(()=>{i(this,K).forEach(r=>{r.onQueryUpdate()}),i(this,X).notify({query:this,type:"updated",action:e})})},Ds);function Ai(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=typeof e<"u",r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ae,js,Mi=(js=class extends dt{constructor(e={}){super();c(this,ae,void 0);this.config=e,o(this,ae,new Map)}build(e,s,r){const n=s.queryKey,u=s.queryHash??Wt(n,s);let h=this.get(u);return h||(h=new Ti({cache:this,queryKey:n,queryHash:u,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(h)),h}add(e){i(this,ae).has(e.queryHash)||(i(this,ae).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,ae).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,ae).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){z.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,ae).get(e)}getAll(){return[...i(this,ae).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>ws(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>ws(e,r)):s}notify(e){z.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){z.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){z.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ae=new WeakMap,js),oe,st,Z,qe,ue,me,Qs,Di=(Qs=class extends Vs{constructor(e){super();c(this,ue);c(this,oe,void 0);c(this,st,void 0);c(this,Z,void 0);c(this,qe,void 0);this.mutationId=e.mutationId,o(this,st,e.defaultOptions),o(this,Z,e.mutationCache),o(this,oe,[]),this.state=e.state||ji(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...i(this,st),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,oe).includes(e)||(i(this,oe).push(e),this.clearGcTimeout(),i(this,Z).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){o(this,oe,i(this,oe).filter(s=>s!==e)),this.scheduleGc(),i(this,Z).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,oe).length||(this.state.status==="pending"?this.scheduleGc():i(this,Z).remove(this))}continue(){var e;return((e=i(this,qe))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var n,u,h,p,w,R,d,D,j,g,S,L,m,y,k,O,_,G,V,q;const s=()=>(o(this,qe,Bs({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,se)=>{v(this,ue,me).call(this,{type:"failed",failureCount:M,error:se})},onPause:()=>{v(this,ue,me).call(this,{type:"pause"})},onContinue:()=>{v(this,ue,me).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),i(this,qe).promise),r=this.state.status==="pending";try{if(!r){v(this,ue,me).call(this,{type:"pending",variables:e}),await((u=(n=i(this,Z).config).onMutate)==null?void 0:u.call(n,e,this));const se=await((p=(h=this.options).onMutate)==null?void 0:p.call(h,e));se!==this.state.context&&v(this,ue,me).call(this,{type:"pending",context:se,variables:e})}const M=await s();return await((R=(w=i(this,Z).config).onSuccess)==null?void 0:R.call(w,M,e,this.state.context,this)),await((D=(d=this.options).onSuccess)==null?void 0:D.call(d,M,e,this.state.context)),await((g=(j=i(this,Z).config).onSettled)==null?void 0:g.call(j,M,null,this.state.variables,this.state.context,this)),await((L=(S=this.options).onSettled)==null?void 0:L.call(S,M,null,e,this.state.context)),v(this,ue,me).call(this,{type:"success",data:M}),M}catch(M){try{throw await((y=(m=i(this,Z).config).onError)==null?void 0:y.call(m,M,e,this.state.context,this)),await((O=(k=this.options).onError)==null?void 0:O.call(k,M,e,this.state.context)),await((G=(_=i(this,Z).config).onSettled)==null?void 0:G.call(_,void 0,M,this.state.variables,this.state.context,this)),await((q=(V=this.options).onSettled)==null?void 0:q.call(V,void 0,M,e,this.state.context)),M}finally{v(this,ue,me).call(this,{type:"error",error:M})}}}},oe=new WeakMap,st=new WeakMap,Z=new WeakMap,qe=new WeakMap,ue=new WeakSet,me=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!St(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),z.batch(()=>{i(this,oe).forEach(r=>{r.onMutationUpdate(e)}),i(this,Z).notify({mutation:this,type:"updated",action:e})})},Qs);function ji(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ee,it,xe,Is,Qi=(Is=class extends dt{constructor(e={}){super();c(this,ee,void 0);c(this,it,void 0);c(this,xe,void 0);this.config=e,o(this,ee,[]),o(this,it,0)}build(e,s,r){const n=new Di({mutationCache:this,mutationId:++yt(this,it)._,options:e.defaultMutationOptions(s),state:r});return this.add(n),n}add(e){i(this,ee).push(e),this.notify({type:"added",mutation:e})}remove(e){o(this,ee,i(this,ee).filter(s=>s!==e)),this.notify({type:"removed",mutation:e})}clear(){z.batch(()=>{i(this,ee).forEach(e=>{this.remove(e)})})}getAll(){return i(this,ee)}find(e){const s={exact:!0,...e};return i(this,ee).find(r=>Ss(s,r))}findAll(e={}){return i(this,ee).filter(s=>Ss(e,s))}notify(e){z.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){return o(this,xe,(i(this,xe)??Promise.resolve()).then(()=>{const e=i(this,ee).filter(s=>s.state.isPaused);return z.batch(()=>e.reduce((s,r)=>s.then(()=>r.continue().catch(te)),Promise.resolve()))}).then(()=>{o(this,xe,void 0)})),i(this,xe)}},ee=new WeakMap,it=new WeakMap,xe=new WeakMap,Is);function Ii(t){return{onFetch:(e,s)=>{const r=async()=>{var S,L,m,y,k;const n=e.options,u=(m=(L=(S=e.fetchOptions)==null?void 0:S.meta)==null?void 0:L.fetchMore)==null?void 0:m.direction,h=((y=e.state.data)==null?void 0:y.pages)||[],p=((k=e.state.data)==null?void 0:k.pageParams)||[],w={pages:[],pageParams:[]};let R=!1;const d=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(e.signal.aborted?R=!0:e.signal.addEventListener("abort",()=>{R=!0}),e.signal)})},D=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),j=async(O,_,G)=>{if(R)return Promise.reject();if(_==null&&O.pages.length)return Promise.resolve(O);const V={queryKey:e.queryKey,pageParam:_,direction:G?"backward":"forward",meta:e.options.meta};d(V);const q=await D(V),{maxPages:M}=e.options,se=G?Fi:Pi;return{pages:se(O.pages,q,M),pageParams:se(O.pageParams,_,M)}};let g;if(u&&h.length){const O=u==="backward",_=O?Li:Rs,G={pages:h,pageParams:p},V=_(n,G);g=await j(G,V,O)}else{g=await j(w,p[0]??n.initialPageParam);const O=t??h.length;for(let _=1;_<O;_++){const G=Rs(n,g);g=await j(g,G)}}return g};e.options.persister?e.fetchFn=()=>{var n,u;return(u=(n=e.options).persister)==null?void 0:u.call(n,r,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=r}}}function Rs(t,{pages:e,pageParams:s}){const r=e.length-1;return t.getNextPageParam(e[r],e,s[r],s)}function Li(t,{pages:e,pageParams:s}){var r;return(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s)}var B,be,ve,Be,Ve,Ce,Ke,ze,Ls,ki=(Ls=class{constructor(t={}){c(this,B,void 0);c(this,be,void 0);c(this,ve,void 0);c(this,Be,void 0);c(this,Ve,void 0);c(this,Ce,void 0);c(this,Ke,void 0);c(this,ze,void 0);o(this,B,t.queryCache||new Mi),o(this,be,t.mutationCache||new Qi),o(this,ve,t.defaultOptions||{}),o(this,Be,new Map),o(this,Ve,new Map),o(this,Ce,0)}mount(){yt(this,Ce)._++,i(this,Ce)===1&&(o(this,Ke,vt.subscribe(()=>{vt.isFocused()&&(this.resumePausedMutations(),i(this,B).onFocus())})),o(this,ze,Ct.subscribe(()=>{Ct.isOnline()&&(this.resumePausedMutations(),i(this,B).onOnline())})))}unmount(){var t,e;yt(this,Ce)._--,i(this,Ce)===0&&((t=i(this,Ke))==null||t.call(this),o(this,Ke,void 0),(e=i(this,ze))==null||e.call(this),o(this,ze,void 0))}isFetching(t){return i(this,B).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,be).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=i(this,B).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=i(this,B).find({queryKey:t}),n=r==null?void 0:r.state.data,u=wi(e,n);if(typeof u>"u")return;const h=this.defaultQueryOptions({queryKey:t});return i(this,B).build(this,h).setData(u,{...s,manual:!0})}setQueriesData(t,e,s){return z.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var e;return(e=i(this,B).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=i(this,B);z.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,B),r={type:"active",...t};return z.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},r=z.batch(()=>i(this,B).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(te).catch(te)}invalidateQueries(t={},e={}){return z.batch(()=>{if(i(this,B).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=z.batch(()=>i(this,B).findAll(t).filter(n=>!n.isDisabled()).map(n=>{let u=n.fetch(void 0,s);return s.throwOnError||(u=u.catch(te)),n.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(te)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const s=i(this,B).build(this,e);return s.isStaleByTime(e.staleTime)?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(te).catch(te)}fetchInfiniteQuery(t){return t.behavior=Ii(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(te).catch(te)}resumePausedMutations(){return i(this,be).resumePausedMutations()}getQueryCache(){return i(this,B)}getMutationCache(){return i(this,be)}getDefaultOptions(){return i(this,ve)}setDefaultOptions(t){o(this,ve,t)}setQueryDefaults(t,e){i(this,Be).set(Ye(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,Be).values()];let s={};return e.forEach(r=>{et(t,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(t,e){i(this,Ve).set(Ye(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,Ve).values()];let s={};return e.forEach(r=>{et(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...i(this,ve).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Wt(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,ve).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,B).clear(),i(this,be).clear()}},B=new WeakMap,be=new WeakMap,ve=new WeakMap,Be=new WeakMap,Ve=new WeakMap,Ce=new WeakMap,Ke=new WeakMap,ze=new WeakMap,Ls),W,T,He,H,Re,Ge,le,rt,We,Ze,Oe,Ee,we,Te,Ae,Xe,nt,Nt,at,_t,ot,qt,ut,Bt,lt,Vt,ct,Kt,ht,zt,wt,Ks,ks,Ui=(ks=class extends dt{constructor(e,s){super();c(this,Ae);c(this,nt);c(this,at);c(this,ot);c(this,ut);c(this,lt);c(this,ct);c(this,ht);c(this,wt);c(this,W,void 0);c(this,T,void 0);c(this,He,void 0);c(this,H,void 0);c(this,Re,void 0);c(this,Ge,void 0);c(this,le,void 0);c(this,rt,void 0);c(this,We,void 0);c(this,Ze,void 0);c(this,Oe,void 0);c(this,Ee,void 0);c(this,we,void 0);c(this,Te,void 0);o(this,T,void 0),o(this,He,void 0),o(this,H,void 0),o(this,Te,new Set),o(this,W,e),this.options=s,o(this,le,null),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,T).addObserver(this),Os(i(this,T),this.options)?v(this,Ae,Xe).call(this):this.updateResult(),v(this,ut,Bt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ht(i(this,T),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ht(i(this,T),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,v(this,lt,Vt).call(this),v(this,ct,Kt).call(this),i(this,T).removeObserver(this)}setOptions(e,s){const r=this.options,n=i(this,T);if(this.options=i(this,W).defaultQueryOptions(e),Lt(r,this.options)||i(this,W).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,T),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),v(this,ht,zt).call(this);const u=this.hasListeners();u&&Es(i(this,T),n,this.options,r)&&v(this,Ae,Xe).call(this),this.updateResult(s),u&&(i(this,T)!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&v(this,nt,Nt).call(this);const h=v(this,at,_t).call(this);u&&(i(this,T)!==n||this.options.enabled!==r.enabled||h!==i(this,we))&&v(this,ot,qt).call(this,h)}getOptimisticResult(e){const s=i(this,W).getQueryCache().build(i(this,W),e),r=this.createResult(s,e);return _i(this,r)&&(o(this,H,r),o(this,Ge,this.options),o(this,Re,i(this,T).state)),r}getCurrentResult(){return i(this,H)}trackResult(e){const s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(i(this,Te).add(r),e[r])})}),s}getCurrentQuery(){return i(this,T)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,W).defaultQueryOptions(e),r=i(this,W).getQueryCache().build(i(this,W),s);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,s))}fetch(e){return v(this,Ae,Xe).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,H)))}createResult(e,s){var V;const r=i(this,T),n=this.options,u=i(this,H),h=i(this,Re),p=i(this,Ge),R=e!==r?e.state:i(this,He),{state:d}=e;let{error:D,errorUpdatedAt:j,fetchStatus:g,status:S}=d,L=!1,m;if(s._optimisticResults){const q=this.hasListeners(),M=!q&&Os(e,s),se=q&&Es(e,r,s,n);(M||se)&&(g=St(e.options.networkMode)?"fetching":"paused",d.dataUpdatedAt||(S="pending")),s._optimisticResults==="isRestoring"&&(g="idle")}if(s.select&&typeof d.data<"u")if(u&&d.data===(h==null?void 0:h.data)&&s.select===i(this,rt))m=i(this,We);else try{o(this,rt,s.select),m=s.select(d.data),m=Ut(u==null?void 0:u.data,m,s),o(this,We,m),o(this,le,null)}catch(q){o(this,le,q)}else m=d.data;if(typeof s.placeholderData<"u"&&typeof m>"u"&&S==="pending"){let q;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(p==null?void 0:p.placeholderData))q=u.data;else if(q=typeof s.placeholderData=="function"?s.placeholderData((V=i(this,Ze))==null?void 0:V.state.data,i(this,Ze)):s.placeholderData,s.select&&typeof q<"u")try{q=s.select(q),o(this,le,null)}catch(M){o(this,le,M)}typeof q<"u"&&(S="success",m=Ut(u==null?void 0:u.data,q,s),L=!0)}i(this,le)&&(D=i(this,le),m=i(this,We),j=Date.now(),S="error");const y=g==="fetching",k=S==="pending",O=S==="error",_=k&&y;return{status:S,fetchStatus:g,isPending:k,isSuccess:S==="success",isError:O,isInitialLoading:_,isLoading:_,data:m,dataUpdatedAt:d.dataUpdatedAt,error:D,errorUpdatedAt:j,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>R.dataUpdateCount||d.errorUpdateCount>R.errorUpdateCount,isFetching:y,isRefetching:y&&!k,isLoadingError:O&&d.dataUpdatedAt===0,isPaused:g==="paused",isPlaceholderData:L,isRefetchError:O&&d.dataUpdatedAt!==0,isStale:Zt(e,s),refetch:this.refetch}}updateResult(e){const s=i(this,H),r=this.createResult(i(this,T),this.options);if(o(this,Re,i(this,T).state),o(this,Ge,this.options),i(this,Re).data!==void 0&&o(this,Ze,i(this,T)),Lt(r,s))return;o(this,H,r);const n={},u=()=>{if(!s)return!0;const{notifyOnChangeProps:h}=this.options,p=typeof h=="function"?h():h;if(p==="all"||!p&&!i(this,Te).size)return!0;const w=new Set(p??i(this,Te));return this.options.throwOnError&&w.add("error"),Object.keys(i(this,H)).some(R=>{const d=R;return i(this,H)[d]!==s[d]&&w.has(d)})};(e==null?void 0:e.listeners)!==!1&&u()&&(n.listeners=!0),v(this,wt,Ks).call(this,{...n,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&v(this,ut,Bt).call(this)}},W=new WeakMap,T=new WeakMap,He=new WeakMap,H=new WeakMap,Re=new WeakMap,Ge=new WeakMap,le=new WeakMap,rt=new WeakMap,We=new WeakMap,Ze=new WeakMap,Oe=new WeakMap,Ee=new WeakMap,we=new WeakMap,Te=new WeakMap,Ae=new WeakSet,Xe=function(e){v(this,ht,zt).call(this);let s=i(this,T).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(te)),s},nt=new WeakSet,Nt=function(){if(v(this,lt,Vt).call(this),$e||i(this,H).isStale||!It(this.options.staleTime))return;const s=Us(i(this,H).dataUpdatedAt,this.options.staleTime)+1;o(this,Oe,setTimeout(()=>{i(this,H).isStale||this.updateResult()},s))},at=new WeakSet,_t=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,T)):this.options.refetchInterval)??!1},ot=new WeakSet,qt=function(e){v(this,ct,Kt).call(this),o(this,we,e),!($e||this.options.enabled===!1||!It(i(this,we))||i(this,we)===0)&&o(this,Ee,setInterval(()=>{(this.options.refetchIntervalInBackground||vt.isFocused())&&v(this,Ae,Xe).call(this)},i(this,we)))},ut=new WeakSet,Bt=function(){v(this,nt,Nt).call(this),v(this,ot,qt).call(this,v(this,at,_t).call(this))},lt=new WeakSet,Vt=function(){i(this,Oe)&&(clearTimeout(i(this,Oe)),o(this,Oe,void 0))},ct=new WeakSet,Kt=function(){i(this,Ee)&&(clearInterval(i(this,Ee)),o(this,Ee,void 0))},ht=new WeakSet,zt=function(){const e=i(this,W).getQueryCache().build(i(this,W),this.options);if(e===i(this,T))return;const s=i(this,T);o(this,T,e),o(this,He,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},wt=new WeakSet,Ks=function(e){z.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,H))}),i(this,W).getQueryCache().notify({query:i(this,T),type:"observerResultsUpdated"})})},ks);function Ni(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Os(t,e){return Ni(t,e)||t.state.dataUpdatedAt>0&&Ht(t,e,e.refetchOnMount)}function Ht(t,e,s){if(e.enabled!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&Zt(t,e)}return!1}function Es(t,e,s,r){return s.enabled!==!1&&(t!==e||r.enabled===!1)&&(!s.suspense||t.state.status!=="error")&&Zt(t,s)}function Zt(t,e){return t.isStaleByTime(e.staleTime)}function _i(t,e){return!Lt(t.getCurrentResult(),e)}var zs=C.createContext(void 0),qi=t=>{const e=C.useContext(zs);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Bi=({client:t,children:e})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),C.createElement(zs.Provider,{value:t},e)),Hs=C.createContext(!1),Vi=()=>C.useContext(Hs);Hs.Provider;function Ki(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var zi=C.createContext(Ki()),Hi=()=>C.useContext(zi);function Gi(t,e){return typeof t=="function"?t(...e):!!t}var Wi=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},Zi=t=>{C.useEffect(()=>{t.clearReset()},[t])},$i=({result:t,errorResetBoundary:e,throwOnError:s,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&Gi(s,[t.error,r]),Ji=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Xi=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Yi=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function er(t,e,s){const r=qi(s),n=Vi(),u=Hi(),h=r.defaultQueryOptions(t);h._optimisticResults=n?"isRestoring":"optimistic",Ji(h),Wi(h,u),Zi(u);const[p]=C.useState(()=>new e(r,h)),w=p.getOptimisticResult(h);if(C.useSyncExternalStore(C.useCallback(R=>{const d=n?()=>{}:p.subscribe(z.batchCalls(R));return p.updateResult(),d},[p,n]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),C.useEffect(()=>{p.setOptions(h,{listeners:!1})},[h,p]),Xi(h,w))throw Yi(h,p,u);if($i({result:w,errorResetBoundary:u,throwOnError:h.throwOnError,query:p.getCurrentQuery()}))throw w.error;return h.notifyOnChangeProps?w:p.trackResult(w)}function tr(t,e){return er(t,Ui,e)}const sr=C.lazy(()=>Gt(()=>import("./Toolbar-f5da6261.js"),["./Toolbar-f5da6261.js","./main.js","./main-a9f78bc8.css","./MetaData-bdfb949d.js","./iconBase-8840166b.js","./DialogContent-0fdbfaca.js","./Select-2486f905.js","./FormHelperText-d043b602.js","./FormControl-5d7bce62.js","./createSvgIcon-d0cfe483.js","./index.esm-df7700a0.js","./Actions-b625cbe1.js","./ConfirmDialog-c5a9ed7e.js","./DialogTitle-3605c73e.js","./Button-e7d59fde.js","./RadioGroup-04724101.js","./Radio-4f834152.js","./FormControlLabel-b874e6c1.js"],import.meta.url)),ir=C.lazy(()=>Gt(()=>import("./RowActions-31fbf8b7.js"),["./RowActions-31fbf8b7.js","./main.js","./main-a9f78bc8.css","./MetaData-bdfb949d.js","./iconBase-8840166b.js","./ConfirmDialog-c5a9ed7e.js","./DialogContent-0fdbfaca.js","./Select-2486f905.js","./FormHelperText-d043b602.js","./FormControl-5d7bce62.js","./createSvgIcon-d0cfe483.js","./DialogTitle-3605c73e.js","./Button-e7d59fde.js","./Actions-b625cbe1.js"],import.meta.url)),rr=C.lazy(()=>Gt(()=>import("./InlineEditing-95c1e1ba.js"),["./InlineEditing-95c1e1ba.js","./main.js","./main-a9f78bc8.css","./Actions-b625cbe1.js","./MetaData-bdfb949d.js","./iconBase-8840166b.js","./index.esm-df7700a0.js","./Button-e7d59fde.js"],import.meta.url)),nr=({appId:t,display:e,refresh:s,showForm:r})=>{var rs,ns,as,os,us,ls,cs,hs,ds,fs,ms,ps,gs;A.debug(t,e,s);const n=Js(Xs.getState(),t),u=n.src.dbs,h=n.src.tbl;A.debug("metaData",n,u,h);const p=((ns=(rs=n==null?void 0:n.settings)==null?void 0:rs.table_settings)==null?void 0:ns.row_count_estimate)===!0&&((os=(as=n==null?void 0:n.settings)==null?void 0:as.table_settings)==null?void 0:os.row_count_estimate_value)==="hard"?(ls=(us=n==null?void 0:n.settings)==null?void 0:us.table_settings)==null?void 0:ls.row_count_estimate_value_hard:void 0,[w,R]=C.useState({pageIndex:0,pageSize:10}),[d,D]=C.useState([]),[j,g]=C.useState(""),[S,L]=C.useState([]),[m,y]=C.useState(!1),[k,O]=C.useState(p),[_,G]=C.useState({global:j,column:S}),[V,q]=C.useState({});A.debug(w,d,j,S,m,k,_,V);const[M,se]=C.useState(Cs("en")),E=Dt(l=>Ys(l,t));A.debug("storeTableSettings",E);const Pt=n.primary_key.length>0,ft=E.viewLink,Ft=!Qe(n)&&((cs=n==null?void 0:n.privs)==null?void 0:cs.update)&&E.transactions.update,xt=!Qe(n)&&((hs=n==null?void 0:n.privs)==null?void 0:hs.delete)&&E.transactions.delete,mt=!Qe(n)&&Pt&&(ft||Ft||xt)||Qe(n)&&ft,Rt=Dt(l=>ei(l,t));A.debug("bulkActions",Rt);let pt=!1;for(const l in Rt)pt=pt||Rt[l]===!0;A.debug("bulkActionsEnabled",pt);const Me=!Qe(n)&&Pt&&pt;A.debug("hasBulkActions",Me);const ie=Dt(l=>ti(l,t));A.debug("tableColumns",ie);const Ot=ie.filter(l=>l.inlineEditing===!0).map(l=>l.columnName);A.debug("inlineEditingColumns",Ot);const Gs=l=>{const a={};return n.primary_key.map(x=>{a[x]=l[x]}),a},ce=(l,a)=>a===null?"":a.includes(`
`)?f.jsxs(f.Fragment,{children:[l.prefix,a.split(`
`).map((x,I)=>I===0?f.jsx("span",{children:x},I):f.jsxs("span",{children:[f.jsx("br",{}),x]},I)),l.suffix]}):l.prefix+a+l.suffix,{data:De,isError:$t,isRefetching:Ws,isLoading:Zs,refetch:Et}=tr({queryKey:["table-data",w.pageIndex,w.pageSize,d,E.searchSettings.forceEnterOnSearch?m:j,E.searchSettings.forceEnterOnSearch?m:S],queryFn:async()=>{var x,I,J,Q;const l={};ie.filter(U=>U.computedField===void 0).map(U=>{l[U.columnName]=U.queryable});const a=await li(si.appUrlSelect,{dbs:u,tbl:h,col:l,pageIndex:w.pageIndex,pageSize:w.pageSize,sorting:d,search:j,searchColumns:S,rowCount:vi(_,{global:j,column:S})?k:void 0,media:n==null?void 0:n.media});return A.debug(a),O((I=(x=a==null?void 0:a.data)==null?void 0:x.meta)==null?void 0:I.rowCount),G({global:j,column:S}),q((Q=(J=a.data)==null?void 0:J.context)==null?void 0:Q.media),a.data},placeholderData:Si}),Jt=C.useMemo(()=>{const l=[];return ie.map(a=>{const x=a.columnName,I=a.columnLabel,J=ci(n,a.columnName),Q=J!==void 0?hi(n.columns[J].data_type,!0):void 0,U=n.media[x];A.debug(x,I,J,Q,U);const F={accessorKey:x,header:I,size:a.width,muiTableHeadCellProps:{className:a.classNames,align:a.alignment,sx:{"& .Mui-TableHeadCell-Content-Wrapper":{display:a.alignment===ys.CENTER?"contents":"inherit",paddingLeft:a.alignment===ys.RIGHT?"10px":"inherit"}}},muiTableBodyCellProps:{className:a.classNames,align:a.alignment},enableColumnFilter:a.inlineSearch,enableSorting:a.orderable,enableColumnActions:a.orderable||a.inlineSearch};J!==void 0&&Pt&&Ot.includes(a.columnName)?F.Cell=({cell:P,row:b})=>(A.debug(P.renderValue(),b.original),f.jsx(C.Suspense,{children:f.jsx(rr,{dbs:u,tbl:h,primaryKey:Gs(b.original),columnName:a.columnName,columnValue:P.getValue()??"",tableState:E,columnMetaData:n.columns[J],columnState:a})})):a.computedField!==void 0?(F.header=a.computedField.label,F.Cell=({cell:P,row:b})=>{var N,de;A.debug(P,b);let re=(N=a.computedField)==null?void 0:N.expression;if(re==null||re==="")return null;for(const fe in b.original)re=re==null?void 0:re.replaceAll(`{data['${fe}']}`,b.original[fe]);if(((de=a.computedField)==null?void 0:de.type)===fi.TEXT)return ce(a,re);{let fe="";try{fe=Function(`
										let computedField = ""
					
										try { 
											computedField = ${re} ?? "" 
										} catch(error) {
											computedField = error
											console.error(error)
										}
					
										return computedField
									`)()}catch($s){fe=$s}return typeof fe=="number"&&a.localize?ce(a,Number(fe).toLocaleString(je(),{minimumFractionDigits:a.decimals,maximumFractionDigits:a.decimals})):ce(a,fe)}}):U==="ImageURL"?(F.muiTableBodyCellProps={className:"pp-image "+a.classNames,align:a.alignment,sx:{"& img":{width:"100%",height:"100%"}}},F.enableColumnFilter=!1,F.enableSorting=!1,F.enableColumnActions=!1,F.Cell=({cell:P})=>(A.debug(Q,P),P.getValue()===null||P.getValue()===""?null:f.jsx(f.Fragment,{children:f.jsx("img",{src:P.getValue(),alt:a.columnLabel})}))):U==="HyperlinkURL"||U==="HyperlinkObject"?(F.muiTableBodyCellProps={className:"pp-hyperlink "+a.classNames,align:a.alignment},F.enableColumnFilter=!1,F.enableSorting=!1,F.enableColumnActions=!1,F.Cell=({cell:P})=>{if(A.debug(Q,P),P.getValue()===null||P.getValue()==="")return null;if(U==="HyperlinkObject")try{const b=JSON.parse(P.getValue());return(b==null?void 0:b.url)!==""&&(b!=null&&b.target)&&(b==null?void 0:b.label)!==""?f.jsx("a",{href:b.url,target:b.target,children:b.label}):null}catch(b){return A.error("Invalid media properties",b),f.jsx(bs,{title:"Error reading media! Check console...",children:f.jsx("span",{children:f.jsx(vs,{})})})}else return f.jsxs("a",{href:P.getValue(),target:"_blank",style:{display:"flex",alignItems:"center",gap:"5px"},children:[f.jsx(di,{}),f.jsx("span",{children:a.columnLabel})]})}):U==="WP-Image"||U==="WP-Attachment"||U==="WP-Audio"||U==="WP-Video"?(F.muiTableBodyCellProps={className:U.toLowerCase()+" "+a.classNames,align:a.alignment},U==="WP-Image"&&(F.muiTableBodyCellProps.sx={"& img":{width:"100%",height:"100%"}}),F.enableColumnFilter=!1,F.enableSorting=!1,F.enableColumnActions=!1,F.Cell=({cell:P,row:b})=>(A.debug(Q,P,b),P.getValue()===null||P.getValue()===""||!V[b.id]||!V[b.id][a.columnName]?null:f.jsxs(f.Fragment,{children:[...V[b.id][a.columnName].map(re=>{try{const N=JSON.parse(re);if(!(N!=null&&N.url))return null;switch(U){case"WP-Image":return f.jsx("img",{src:N.url,title:N.title,alt:N.title},N.title);case"WP-Audio":return f.jsx("audio",{controls:!0,children:f.jsx("source",{src:N.url,type:N.mime_type})});case"WP-Video":return f.jsx("video",{controls:!0,children:f.jsx("source",{src:N.url,type:N.mime_type})});default:{const de=N.mime_type.split("/");return f.jsxs("a",{href:N.url,title:N.title,target:"_blank",children:[f.jsxs("div",{className:"pp-attachment-icon",children:[de[0]==="image"&&f.jsx(mi,{}),de[0]==="audio"&&f.jsx(pi,{}),de[0]==="video"&&f.jsx(gi,{}),de[0]==="application"?de[1]==="pdf"?f.jsx(yi,{}):f.jsx(bi,{}):f.jsx(f.Fragment,{})]}),f.jsx("div",{className:"pp-attachment-link",children:N.title})]})}}}catch(N){return A.error("Invalid media properties",N),f.jsx(bs,{title:"Error reading media! Check console...",children:f.jsx("span",{children:f.jsx(vs,{})})})}})]}))):F.Cell=({cell:P})=>{if(A.debug(Q,P),P.getValue()!==null){if(Q==="number"&&a.localize)return ce(a,Number(P.getValue()).toLocaleString(je(),{minimumFractionDigits:0,maximumFractionDigits:0}));if(Q==="float"&&a.localize)return ce(a,Number(P.getValue()).toLocaleString(je(),{minimumFractionDigits:a.decimals>5?0:a.decimals,maximumFractionDigits:a.decimals>5?99:a.decimals}));if(Q==="date"&&a.localize){const b=new Date(Date.parse(P.getValue()));return ce(a,b==null?void 0:b.toLocaleDateString(je(),{year:"numeric",month:a.dateZeros?"2-digit":"numeric",day:a.dateZeros?"2-digit":"numeric"}))}else if(Q==="time"&&a.localize){const b=new Date(new Date().toDateString()+" "+P.getValue());return ce(a,b==null?void 0:b.toLocaleTimeString(je(),{hour:a.timeZeros?"2-digit":"numeric",minute:a.timeZeros?"2-digit":"numeric",second:a.timeZeros?"2-digit":"numeric"}))}else if(Q==="datetime"&&a.localize){const b=new Date(Date.parse(P.getValue()));return ce(a,b==null?void 0:b.toLocaleDateString(je(),{year:"numeric",month:a.dateZeros?"2-digit":"numeric",day:a.dateZeros?"2-digit":"numeric",hour:a.timeZeros?"2-digit":"numeric",minute:a.timeZeros?"2-digit":"numeric",second:a.timeZeros?"2-digit":"numeric"}))}}return ce(a,P.getValue())},l.push(F)}),l},[n,Ot]);A.debug("columnDef",Jt);const Xt=()=>ie.filter(l=>l.inlineSearch===!0).length>0,$=ri({columns:Jt,data:(De==null?void 0:De.data)??[],rowCount:((ds=De==null?void 0:De.meta)==null?void 0:ds.rowCount)??0,initialState:{density:E.design.density.default,columnPinning:{left:["mrt-row-actions"]}},state:{pagination:w,sorting:d,globalFilter:j,columnFilters:S,isLoading:Zs,showAlertBanner:$t,showProgressBars:Ws,columnOrder:["mrt-row-actions","mrt-row-select"].concat(ie.map(l=>l.columnName))},localization:M,enableStickyHeader:!1,enableColumnOrdering:!1,enableColumnResizing:!1,enableColumnPinning:!1,enableHiding:!0,layoutMode:"semantic",enableDensityToggle:E.design.density.userCanChange,enableTopToolbar:!0,enableBottomToolbar:!0,enableFullScreenToggle:!1,renderTopToolbarCustomActions:()=>f.jsx(C.Suspense,{children:f.jsx(sr,{table:$,metaData:n,appId:t,dbs:u,tbl:h,refetch:Et,showForm:r})}),renderToolbarInternalActions:({table:l})=>f.jsxs(f.Fragment,{children:[f.jsx(ni,{table:l}),Xt()&&f.jsx(ai,{table:l}),f.jsx(oi,{table:l})]}),muiTopToolbarProps:()=>{var l,a;return{sx:{"& .MuiPaper-root":{backgroundColor:Je?Ci((l=Je)==null?void 0:l.palette.primary.main,((a=Je)==null?void 0:a.palette.mode)==="dark"?.2:.1):"inherit"}}}},muiToolbarAlertBannerProps:$t?{color:"error",children:"Error loading data"}:void 0,enableRowActions:mt,positionActionsColumn:"first",renderRowActions:({row:l,table:a})=>{A.debug(l,a);const x={};return n.primary_key.map(I=>{x[I]=l.original[I]}),A.debug(x),f.jsx(C.Suspense,{children:f.jsx(ir,{dbs:u,tbl:h,metaData:n,appId:t,showForm:r,rowId:x,rowData:l.original,refetch:Et})})},displayColumnDefOptions:{"mrt-row-actions":{minSize:0,size:(Number(ft)+Number(Ft)+Number(xt))*40,maxSize:(Number(ft)+Number(Ft)+Number(xt))*40,muiTableBodyCellProps:{sx:{backgroundColor:mt&&E.design.overflow===Mt.SCROLL?`${(ms=(fs=Je)==null?void 0:fs.palette)==null?void 0:ms.background.paper} !important`:"inherit"}},enableHiding:!0},"mrt-row-select":{minSize:0,size:40,maxSize:40,enableHiding:!0}},renderColumnActionsMenuItems:({internalColumnMenuItems:l})=>{const a=l.filter(x=>x.key!=="11"&&x.key!=="12");return a.length===0?a:[...a.slice(0,a.length-1),ii({},...a.slice(a.length-1,a.length),{props:{divider:!1}})]},enableRowSelection:Me,enableSelectAll:Me,muiTableBodyRowProps:({row:l})=>({hover:!0,onClick:l.getToggleSelectedHandler(),sx:{cursor:"pointer"}}),enablePagination:!0,manualPagination:!0,onPaginationChange:R,paginationDisplayMode:"default",positionPagination:"bottom",muiPaginationProps:{rowsPerPageOptions:[5,10,15,20,25,30,50,100],color:"primary",shape:"rounded",variant:"outlined",showRowsPerPage:!0,showFirstButton:!0,showLastButton:!0},manualFiltering:!0,enableFilterMatchHighlighting:!E.searchSettings.forceEnterOnSearch&&E.searchSettings.highlightMatches,onGlobalFilterChange:g,onColumnFiltersChange:L,muiSearchTextFieldProps:{onKeyUp:l=>{l.key.toLowerCase()==="enter"&&y(!m)},sx:{"& .MuiInputBase-input":{padding:"8px"}}},muiFilterTextFieldProps:()=>({onKeyUp:l=>{l.key.toLowerCase()==="enter"&&y(!m)}}),manualSorting:!0,onSortingChange:D,enableColumnActions:!0,enableSorting:!0,enableColumnFilters:Xt(),enableRowNumbers:Qe(n),muiTablePaperProps:{sx:{zIndex:"999999 !important",marginBottom:"2rem",display:e?"block":"none","& input":{border:"none"}},className:"pp-table"},muiTableHeadCellProps:{sx:{backgroundColor:`${(gs=(ps=Je)==null?void 0:ps.palette)==null?void 0:gs.background.paper} !important`,boxShadow:"unset"}},muiTableBodyProps:{sx:{"& tr:nth-of-type(odd)":{},"& td":{boxShadow:"unset"}}},muiBottomToolbarProps:{sx:{"& > .MuiBox-root > .MuiBox-root > .MuiBox-root":{alignItems:"center",paddingTop:0,paddingRight:"10px",paddingBottom:0,paddingLeft:0},"& .MuiTypography-root":{font:"inherit",paddingLeft:"0.5rem",paddingRight:"0.5rem"}}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"},margin:0}}});A.debug($);const Yt=l=>{for(const a in ie)if(ie[a].columnName===l)return ie[a];return null},je=()=>(E==null?void 0:E.locale)===""?"en-US":(E==null?void 0:E.locale)??"en-US";C.useEffect(()=>{se(Cs(E.locale))},[E.locale]),C.useEffect(()=>{const l=$.getAllColumns();l[0].id==="mrt-row-actions"&&l[0].toggleVisibility(mt)},[E.viewLink,E.transactions]),C.useEffect(()=>{const l=$.getAllColumns();l[1].id==="mrt-row-select"&&l[1].toggleVisibility(Me)},[E.bulkActions]);const es=jt("(min-width: 1200px)"),ts=jt("(max-width: 600px)"),gt=jt("(max-width: 900px)");C.useEffect(()=>{if(E.design.overflow===Mt.SCROLL){const l=$.getAllColumns();for(let a=0;a<l.length;a++){const x=Yt(l[a].id);x!==null&&(es?l[a].toggleVisibility(x.visible??!1):ts?l[a].toggleVisibility(x.visibleMobile??!1):l[a].toggleVisibility(x.visibleTablet??!1))}}},[E.design.overflow,ie,es,ts]);const ss=(l=1)=>{var U;const a=$.refs.tableContainerRef.current.offsetWidth,x=$.getState().density==="spacious"?40:$.getState().density==="comfortable"?32:16,I=80;let J=0;const Q=$.getAllColumns();for(let F=0;F<Q.length;F++){const P=Yt(Q[F].id);P!==null?(P==null?void 0:P.visible)===!0?(J+=Q[F].getSize()+x,J+I>a?F>l&&Q[F].toggleVisibility(!1):Q[F].toggleVisibility(!0)):Q[F].toggleVisibility(!1):(!gt||((U=Q[F])==null?void 0:U.id)!=="mrt-row-select")&&(J+=Q[F].getSize()+x)}},[Tt]=C.useState(1+(mt?1:0)+(Me?1:0));A.debug("staticColumnNumber",Tt),C.useEffect(()=>{var a,x;if(Me){const I=$.getAllColumns();((a=I[0])==null?void 0:a.id)==="mrt-row-select"&&(gt?I[0].toggleVisibility(!1):I[0].toggleVisibility(!0)),((x=I[1])==null?void 0:x.id)==="mrt-row-select"&&(gt?I[1].toggleVisibility(!1):I[1].toggleVisibility(!0))}function l(){ss(Tt)}return E.design.overflow===Mt.RESPONSIVE&&(ss(Tt),window.addEventListener("resize",l)),()=>window.removeEventListener("resize",l)},[$.getState().density,E.design.overflow,ie,gt]);const is=C.useRef(!0);return C.useEffect(()=>{is.current?is.current=!1:Et()},[s]),f.jsx(ui,{table:$})},kr=({appId:t,display:e,refresh:s,showForm:r})=>{A.debug(t,e,s);const n=new ki;return f.jsx(Bi,{client:n,children:f.jsx(nr,{appId:t,display:e,refresh:s,showForm:r})})};export{kr as default};
