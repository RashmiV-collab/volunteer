import{r as g,j as n,l as y,s as at,a as lt,b as it,C as k,c as dt,d as ct,e as ut,f as pt,g as ft,h as gt,i as xt,k as ht,m as mt,n as Ae,o as bt,p as yt,q as Ct,t as Tt,u as Nt,w as St,x as It,y as jt,z as Et,A as vt,B as Pt,D as wt,E as $e,F as He,G as oe,H as re,_ as Ue,I as Rt,J as Lt,K as _t,L as Ft,v as At,M as Mt,N as Dt}from"./main.js";import{o as We,u as kt,a as Ot,b as Bt,B as P,C as Kt,c as F,d as S,R as O,T as Me,e as Vt,f as zt,g as $t,A as Ht,h as Ut,M as Wt,S as Gt}from"./MetaData-bdfb949d.js";import{g as Ne,a as Se,s as K,_ as I,u as Ie,b as Q,T as R,c as je,d as Ee,e as Ge,f as Xt,h as Y,i as ae,I as ye}from"./iconBase-8840166b.js";import{M as U}from"./index.esm-8e0efb65.js";import{a as qt,b as Yt,c as Jt,d as Z,e as ee,f as Qt}from"./index.esm-df7700a0.js";import{C as Xe}from"./Switch-9746da4d.js";import{C as Zt,a as es}from"./CardContent-eb18906e.js";import{F as le}from"./FormControl-5d7bce62.js";import{F as ie}from"./Select-2486f905.js";import{C as de}from"./Checkbox-936eee09.js";import{C as ts}from"./CardActions-0560b6a5.js";import{B as De}from"./Button-e7d59fde.js";import{T as ss}from"./TextField-0f586f77.js";import{I as ke}from"./InputAdornment-cdfef043.js";import{a as ns}from"./AdminTheme-ba57f315.js";import"./createSvgIcon-d0cfe483.js";import"./MenuItem-13e93691.js";import"./useMobilePicker-c4cfadfc.js";import"./DialogContent-0fdbfaca.js";import"./Chip-505aa5a1.js";import"./Radio-4f834152.js";import"./FormControlLabel-b874e6c1.js";import"./FormHelperText-d043b602.js";import"./AlertTitle-902c49a6.js";import"./Close-9e29875c.js";import"./DialogTitle-3605c73e.js";import"./Divider-04519c21.js";import"./DatePicker-aa62f03a.js";import"./dateViewRenderers-8287ebc5.js";function os(e){return Se("MuiCardHeader",e)}const rs=Ne("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Oe=rs,as=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],ls=e=>{const{classes:t}=e;return Ee({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},os,t)},is=K("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>I({[`& .${Oe.title}`]:t.title,[`& .${Oe.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),ds=K("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),cs=K("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),us=K("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),ps=g.forwardRef(function(t,s){const o=Ie({props:t,name:"MuiCardHeader"}),{action:a,avatar:i,className:d,component:r="div",disableTypography:p=!1,subheader:c,subheaderTypographyProps:h,title:x,titleTypographyProps:C}=o,f=Q(o,as),l=I({},o,{component:r,disableTypography:p}),u=ls(l);let m=x;m!=null&&m.type!==R&&!p&&(m=n.jsx(R,I({variant:i?"body2":"h5",className:u.title,component:"span",display:"block"},C,{children:m})));let b=c;return b!=null&&b.type!==R&&!p&&(b=n.jsx(R,I({variant:i?"body2":"body1",className:u.subheader,color:"text.secondary",component:"span",display:"block"},h,{children:b}))),n.jsxs(is,I({className:je(u.root,d),as:r,ref:s,ownerState:l},f,{children:[i&&n.jsx(ds,{className:u.avatar,ownerState:l,children:i}),n.jsxs(us,{className:u.content,ownerState:l,children:[m,b]}),a&&n.jsx(cs,{className:u.action,ownerState:l,children:a})]}))}),fs=ps;function gs(e){return Se("MuiTreeView",e)}Ne("MuiTreeView",["root"]);const qe={instance:null,multiSelect:!1,disabledItemsFocusable:!1,treeId:void 0,icons:{defaultCollapseIcon:null,defaultExpandIcon:null,defaultParentIcon:null,defaultEndIcon:null}},Ye=g.createContext(qe),xs=(e,t)=>{const s=g.useRef({}),[o,a]=g.useState(()=>{const d={};return e.forEach(r=>{r.models&&Object.entries(r.models).forEach(([p,c])=>{s.current[p]={controlledProp:c.controlledProp,defaultProp:c.defaultProp,isControlled:t[c.controlledProp]!==void 0},d[p]=t[c.defaultProp]})}),d});return Object.fromEntries(Object.entries(s.current).map(([d,r])=>{const p=r.isControlled?t[r.controlledProp]:o[d];return[d,{value:p,setValue:c=>{r.isControlled||a(h=>I({},h,{[d]:c}))}}]}))};class hs{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,s,o={}){let a=this.events[t];a||(a={highPriority:new Map,regular:new Map},this.events[t]=a),o.isFirst?a.highPriority.set(s,!0):a.regular.set(s,!0)}removeListener(t,s){this.events[t]&&(this.events[t].regular.delete(s),this.events[t].highPriority.delete(s))}removeAllListeners(){this.events={}}emit(t,...s){const o=this.events[t];if(!o)return;const a=Array.from(o.highPriority.keys()),i=Array.from(o.regular.keys());for(let d=a.length-1;d>=0;d-=1){const r=a[d];o.highPriority.has(r)&&r.apply(this,s)}for(let d=0;d<i.length;d+=1){const r=i[d];o.regular.has(r)&&r.apply(this,s)}}once(t,s){const o=this;this.on(t,function a(...i){o.removeListener(t,a),s.apply(o,i)})}}const be=(e,t)=>{const s=e.getNode(t),o=e.getNavigableChildrenIds(s.parentId),a=o.indexOf(t);if(a===0)return s.parentId;let i=o[a-1];for(;e.isNodeExpanded(i)&&e.getNavigableChildrenIds(i).length>0;)i=e.getNavigableChildrenIds(i).pop();return i},X=(e,t)=>{if(e.isNodeExpanded(t)&&e.getNavigableChildrenIds(t).length>0)return e.getNavigableChildrenIds(t)[0];let s=e.getNode(t);for(;s!=null;){const o=e.getNavigableChildrenIds(s.parentId),a=o[o.indexOf(s.id)+1];if(a)return a;s=e.getNode(s.parentId)}return null},Ce=e=>{let t=e.getNavigableChildrenIds(null).pop();for(;e.isNodeExpanded(t);)t=e.getNavigableChildrenIds(t).pop();return t},Te=e=>e.getNavigableChildrenIds(null)[0],W=(e,t)=>{Object.assign(e,t)},ms=e=>e.isPropagationStopped!==void 0,bs=({instance:e})=>{const[t]=g.useState(()=>new hs),s=g.useCallback((...a)=>{const[i,d,r={}]=a;r.defaultMuiPrevented=!1,!(ms(r)&&r.isPropagationStopped())&&t.emit(i,d,r)},[t]),o=g.useCallback((a,i)=>(t.on(a,i),()=>{t.removeListener(a,i)}),[t]);W(e,{$$publishEvent:s,$$subscribeEvent:o})},ys=[bs],Cs=e=>{const t=[...ys,...e.plugins],s=t.reduce((l,u)=>u.getDefaultizedParams?u.getDefaultizedParams(l):l,e),o=xs(t,s),i=g.useRef({}).current,d=g.useRef(null),r=Ge(d,e.rootRef),[p,c]=g.useState(()=>{const l={};return t.forEach(u=>{u.getInitialState&&Object.assign(l,u.getInitialState(s))}),l}),h=[];let x=qe;const C=l=>{const u=l({instance:i,params:s,state:p,setState:c,rootRef:d,models:o})||{};u.getRootProps&&h.push(u.getRootProps),u.contextValue&&(x=u.contextValue)};return t.forEach(C),{getRootProps:(l={})=>{const u=I({role:"tree",tabIndex:0},l,{ref:r});return h.forEach(m=>{Object.assign(u,m(l))}),u},rootRef:r,contextValue:x}},Ts=["element"];function Ns(e,t){for(let s=0;s<e.length;s+=1)if(t(e[s]))return s;return-1}function Ss(e,t){let s=0,o=e.length-1;for(;s<=o;){const a=Math.floor((s+o)/2);if(e[a].element===t)return a;e[a].element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING?o=a-1:s=a+1}return s}const Je=g.createContext({});function Is(e){const t=g.useRef(null);return g.useEffect(()=>{t.current=e},[e]),t.current}const Be=()=>{};function js(e){const[,t]=g.useState(),{registerDescendant:s=Be,unregisterDescendant:o=Be,descendants:a=[],parentId:i=null}=g.useContext(Je),d=Ns(a,c=>c.element===e.element),r=Is(a),p=a.some((c,h)=>r&&r[h]&&r[h].element!==c.element);return Xt(()=>{if(e.element)return s(I({},e,{index:d})),()=>{o(e.element)};t({})},[s,o,d,p,e]),{parentId:i,index:d}}function Qe(e){const{children:t,id:s}=e,[o,a]=g.useState([]),i=g.useCallback(p=>{let{element:c}=p,h=Q(p,Ts);a(x=>{if(x.length===0)return[I({},h,{element:c,index:0})];const C=Ss(x,c);let f;if(x[C]&&x[C].element===c)f=x;else{const l=I({},h,{element:c,index:C});f=x.slice(),f.splice(C,0,l)}return f.forEach((l,u)=>{l.index=u}),f})},[]),d=g.useCallback(p=>{a(c=>c.filter(h=>p!==h.element))},[]),r=g.useMemo(()=>({descendants:o,registerDescendant:i,unregisterDescendant:d,parentId:s}),[o,i,d,s]);return n.jsx(Je.Provider,{value:r,children:t})}function Es(e){const{value:t,children:s}=e;return n.jsx(Ye.Provider,{value:t,children:n.jsx(Qe,{children:s})})}const vs=(e,t,s)=>{e.$$publishEvent(t,s)},Ps=({instance:e,params:t})=>{const s=g.useRef({}),o=g.useCallback(c=>s.current[c],[]),a=g.useCallback(c=>{s.current[c.id]=c},[]),i=g.useCallback(c=>{const h=I({},s.current);delete h[c],s.current=h,vs(e,"removeNode",{id:c})},[e]),d=g.useCallback(c=>{if(c==null)return!1;let h=e.getNode(c);if(!h)return!1;if(h.disabled)return!0;for(;h.parentId!=null;)if(h=e.getNode(h.parentId),h.disabled)return!0;return!1},[e]),r=Y(c=>Object.values(s.current).filter(h=>h.parentId===c).sort((h,x)=>h.index-x.index).map(h=>h.id));W(e,{getNode:o,updateNode:a,removeNode:i,getChildrenIds:r,getNavigableChildrenIds:c=>{let h=e.getChildrenIds(c);return t.disabledItemsFocusable||(h=h.filter(x=>!e.isNodeDisabled(x))),h},isNodeDisabled:d})},ve=({instance:e,params:t,models:s})=>{const o=g.useCallback(r=>Array.isArray(s.expanded.value)?s.expanded.value.indexOf(r)!==-1:!1,[s.expanded.value]),a=g.useCallback(r=>{var p;return!!((p=e.getNode(r))!=null&&p.expandable)},[e]),i=Y((r,p)=>{if(p==null)return;let c;s.expanded.value.indexOf(p)!==-1?c=s.expanded.value.filter(h=>h!==p):c=[p].concat(s.expanded.value),t.onNodeToggle&&t.onNodeToggle(r,c),s.expanded.setValue(c)});W(e,{isNodeExpanded:o,isNodeExpandable:a,toggleNodeExpansion:i,expandAllSiblings:(r,p)=>{const c=e.getNode(p),x=e.getChildrenIds(c.parentId).filter(f=>e.isNodeExpandable(f)&&!e.isNodeExpanded(f)),C=s.expanded.value.concat(x);x.length>0&&(s.expanded.setValue(C),t.onNodeToggle&&t.onNodeToggle(r,C))}})};ve.models={expanded:{controlledProp:"expanded",defaultProp:"defaultExpanded"}};const ws=[];ve.getDefaultizedParams=e=>{var t;return I({},e,{defaultExpanded:(t=e.defaultExpanded)!=null?t:ws})};const Rs=(e,t,s)=>{if(t===s)return[t,s];const o=e.getNode(t),a=e.getNode(s);if(o.parentId===a.id||a.parentId===o.id)return a.parentId===o.id?[o.id,a.id]:[a.id,o.id];const i=[o.id],d=[a.id];let r=o.parentId,p=a.parentId,c=d.indexOf(r)!==-1,h=i.indexOf(p)!==-1,x=!0,C=!0;for(;!h&&!c;)x&&(i.push(r),c=d.indexOf(r)!==-1,x=r!==null,!c&&x&&(r=e.getNode(r).parentId)),C&&!c&&(d.push(p),h=i.indexOf(p)!==-1,C=p!==null,!h&&C&&(p=e.getNode(p).parentId));const f=c?r:p,l=e.getChildrenIds(f),u=i[i.indexOf(f)-1],m=d[d.indexOf(f)-1];return l.indexOf(u)<l.indexOf(m)?[t,s]:[s,t]},Pe=({instance:e,params:t,models:s})=>{const o=g.useRef(null),a=g.useRef(!1),i=g.useRef([]),d=l=>Array.isArray(s.selected.value)?s.selected.value.indexOf(l)!==-1:s.selected.value===l,r=(l,u,m=!1)=>{if(!t.disableSelection){if(m){if(Array.isArray(s.selected.value)){let b;s.selected.value.indexOf(u)!==-1?b=s.selected.value.filter(T=>T!==u):b=[u].concat(s.selected.value),t.onNodeSelect&&t.onNodeSelect(l,b),s.selected.setValue(b)}}else{const b=t.multiSelect?[u]:u;t.onNodeSelect&&t.onNodeSelect(l,b),s.selected.setValue(b)}o.current=u,a.current=!1,i.current=[]}},p=(l,u)=>{const[m,b]=Rs(e,l,u),T=[m];let N=m;for(;N!==b;)N=X(e,N),T.push(N);return T},c=(l,u)=>{let m=s.selected.value.slice();const{start:b,next:T,current:N}=u;!T||!N||(i.current.indexOf(N)===-1&&(i.current=[]),a.current?i.current.indexOf(T)!==-1?(m=m.filter(j=>j===b||j!==N),i.current=i.current.filter(j=>j===b||j!==N)):(m.push(T),i.current.push(T)):(m.push(T),i.current.push(N,T)),t.onNodeSelect&&t.onNodeSelect(l,m),s.selected.setValue(m))},h=(l,u)=>{let m=s.selected.value.slice();const{start:b,end:T}=u;a.current&&(m=m.filter(E=>i.current.indexOf(E)===-1));let N=p(b,T);N=N.filter(E=>!e.isNodeDisabled(E)),i.current=N;let j=m.concat(N);j=j.filter((E,A)=>j.indexOf(E)===A),t.onNodeSelect&&t.onNodeSelect(l,j),s.selected.setValue(j)};return W(e,{isNodeSelected:d,selectNode:r,selectRange:(l,u,m=!1)=>{if(t.disableSelection)return;const{start:b=o.current,end:T,current:N}=u;m?c(l,{start:b,next:T,current:N}):b!=null&&T!=null&&h(l,{start:b,end:T}),a.current=!0},rangeSelectToLast:(l,u)=>{o.current||(o.current=u);const m=a.current?o.current:u;e.selectRange(l,{start:m,end:Ce(e)})},rangeSelectToFirst:(l,u)=>{o.current||(o.current=u);const m=a.current?o.current:u;e.selectRange(l,{start:m,end:Te(e)})}}),{getRootProps:()=>({"aria-multiselectable":t.multiSelect})}};Pe.models={selected:{controlledProp:"selected",defaultProp:"defaultSelected"}};const Ls=[];Pe.getDefaultizedParams=e=>{var t,s,o;return I({},e,{disableSelection:(t=e.disableSelection)!=null?t:!1,multiSelect:(s=e.multiSelect)!=null?s:!1,defaultSelected:(o=e.defaultSelected)!=null?o:e.multiSelect?Ls:null})};const Ke=1e3;class _s{constructor(t=Ke){this.timeouts=new Map,this.cleanupTimeout=Ke,this.cleanupTimeout=t}register(t,s,o){this.timeouts||(this.timeouts=new Map);const a=setTimeout(()=>{typeof s=="function"&&s(),this.timeouts.delete(o.cleanupToken)},this.cleanupTimeout);this.timeouts.set(o.cleanupToken,a)}unregister(t){const s=this.timeouts.get(t.cleanupToken);s&&(this.timeouts.delete(t.cleanupToken),clearTimeout(s))}reset(){this.timeouts&&(this.timeouts.forEach((t,s)=>{this.unregister({cleanupToken:s})}),this.timeouts=void 0)}}class Fs{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,s,o){this.registry.register(t,s,o)}unregister(t){this.registry.unregister(t)}reset(){}}class As{}function Ms(e){let t=0;return function(o,a,i){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Fs:new _s);const[d]=g.useState(new As),r=g.useRef(null),p=g.useRef();p.current=i;const c=g.useRef(null);if(!r.current&&p.current){const h=(x,C)=>{if(!C.defaultMuiPrevented){var f;(f=p.current)==null||f.call(p,x,C)}};r.current=o.$$subscribeEvent(a,h),t+=1,c.current={cleanupToken:t},e.registry.register(d,()=>{var x;(x=r.current)==null||x.call(r),r.current=null,c.current=null},c.current)}else!p.current&&r.current&&(r.current(),r.current=null,c.current&&(e.registry.unregister(c.current),c.current=null));g.useEffect(()=>{if(!r.current&&p.current){const h=(x,C)=>{if(!C.defaultMuiPrevented){var f;(f=p.current)==null||f.call(p,x,C)}};r.current=o.$$subscribeEvent(a,h)}return c.current&&e.registry&&(e.registry.unregister(c.current),c.current=null),()=>{var h;(h=r.current)==null||h.call(r),r.current=null}},[o,a])}}const Ds={registry:null},ks=Ms(Ds),we=({instance:e,params:t,state:s,setState:o,models:a,rootRef:i})=>{const d=Y(f=>{const l=typeof f=="function"?f(s.focusedNodeId):f;o(u=>I({},u,{focusedNodeId:l}))}),r=g.useCallback(f=>s.focusedNodeId===f,[s.focusedNodeId]),p=Y((f,l)=>{l&&(d(l),t.onNodeFocus&&t.onNodeFocus(f,l))});W(e,{isNodeFocused:r,focusNode:p}),ks(e,"removeNode",({id:f})=>{d(l=>l===f&&i.current===We(i.current).activeElement?e.getChildrenIds(null)[0]:l)});const c=f=>l=>{var u;if((u=f.onFocus)==null||u.call(f,l),l.target===l.currentTarget){const m=T=>{const N=e.getNode(T);return N&&(N.parentId==null||e.isNodeExpanded(N.parentId))};let b;Array.isArray(a.selected.value)?b=a.selected.value.find(m):a.selected.value!=null&&m(a.selected.value)&&(b=a.selected.value),b==null&&(b=e.getNavigableChildrenIds(null)[0]),e.focusNode(l,b)}},h=f=>l=>{var u;(u=f.onBlur)==null||u.call(f,l),d(null)},x=e.getNode(s.focusedNodeId),C=x?x.idAttribute:null;return{getRootProps:f=>({onFocus:c(f),onBlur:h(f),"aria-activedescendant":C??void 0})}};we.getInitialState=()=>({focusedNodeId:null});we.getDefaultizedParams=e=>{var t;return I({},e,{disabledItemsFocusable:(t=e.disabledItemsFocusable)!=null?t:!1})};function Os(e){return e&&e.length===1&&e.match(/\S/)}function Ve(e,t,s){for(let o=t;o<e.length;o+=1)if(s===e[o])return o;return-1}const Bs=({instance:e,params:t,state:s})=>{const a=kt().direction==="rtl",i=g.useRef({}),d=Y((f,l)=>(i.current[f]=l,()=>{const u=I({},i.current);delete u[f],i.current=u}));W(e,{mapFirstChar:d});const r=f=>(s.focusedNodeId!=null&&e.isNodeExpandable(s.focusedNodeId)&&(e.isNodeExpanded(s.focusedNodeId)?e.focusNode(f,X(e,s.focusedNodeId)):e.isNodeDisabled(s.focusedNodeId)||e.toggleNodeExpansion(f,s.focusedNodeId)),!0),p=f=>{if(s.focusedNodeId==null)return!1;if(e.isNodeExpanded(s.focusedNodeId)&&!e.isNodeDisabled(s.focusedNodeId))return e.toggleNodeExpansion(f,s.focusedNodeId),!0;const l=e.getNode(s.focusedNodeId).parentId;return l?(e.focusNode(f,l),!0):!1},c=(f,l,u)=>{let m,b;const T=u.toLowerCase(),N=[],j=[];Object.keys(i.current).forEach(E=>{const A=e.getNode(E),L=A.parentId?e.isNodeExpanded(A.parentId):!0,z=t.disabledItemsFocusable?!1:e.isNodeDisabled(E);L&&!z&&(N.push(E),j.push(i.current[E]))}),m=N.indexOf(l)+1,m>=N.length&&(m=0),b=Ve(j,m,T),b===-1&&(b=Ve(j,0,T)),b>-1&&e.focusNode(f,N[b])},h=(f,l)=>{e.isNodeDisabled(X(e,l))||e.selectRange(f,{end:X(e,l),current:l},!0)},x=(f,l)=>{e.isNodeDisabled(be(e,l))||e.selectRange(f,{end:be(e,l),current:l},!0)},C=f=>l=>{var u;(u=f.onKeyDown)==null||u.call(f,l);let m=!1;const b=l.key;if(l.altKey||l.currentTarget!==l.target||s.focusedNodeId==null)return;const T=l.ctrlKey||l.metaKey;switch(b){case" ":!t.disableSelection&&!e.isNodeDisabled(s.focusedNodeId)&&(m=!0,t.multiSelect&&l.shiftKey?e.selectRange(l,{end:s.focusedNodeId}):t.multiSelect?e.selectNode(l,s.focusedNodeId,!0):e.selectNode(l,s.focusedNodeId)),l.stopPropagation();break;case"Enter":e.isNodeDisabled(s.focusedNodeId)||(e.isNodeExpandable(s.focusedNodeId)?(e.toggleNodeExpansion(l,s.focusedNodeId),m=!0):t.disableSelection||(m=!0,t.multiSelect?e.selectNode(l,s.focusedNodeId,!0):e.selectNode(l,s.focusedNodeId))),l.stopPropagation();break;case"ArrowDown":t.multiSelect&&l.shiftKey&&!t.disableSelection&&h(l,s.focusedNodeId),e.focusNode(l,X(e,s.focusedNodeId)),m=!0;break;case"ArrowUp":t.multiSelect&&l.shiftKey&&!t.disableSelection&&x(l,s.focusedNodeId),e.focusNode(l,be(e,s.focusedNodeId)),m=!0;break;case"ArrowRight":a?m=p(l):m=r(l);break;case"ArrowLeft":a?m=r(l):m=p(l);break;case"Home":t.multiSelect&&T&&l.shiftKey&&!t.disableSelection&&!e.isNodeDisabled(s.focusedNodeId)&&e.rangeSelectToFirst(l,s.focusedNodeId),e.focusNode(l,Te(e)),m=!0;break;case"End":t.multiSelect&&T&&l.shiftKey&&!t.disableSelection&&!e.isNodeDisabled(s.focusedNodeId)&&e.rangeSelectToLast(l,s.focusedNodeId),e.focusNode(l,Ce(e)),m=!0;break;default:b==="*"?(e.expandAllSiblings(l,s.focusedNodeId),m=!0):t.multiSelect&&T&&b.toLowerCase()==="a"&&!t.disableSelection?(e.selectRange(l,{start:Te(e),end:Ce(e)}),m=!0):!T&&!l.shiftKey&&Os(b)&&(c(l,s.focusedNodeId,b),m=!0)}m&&(l.preventDefault(),l.stopPropagation())};return{getRootProps:f=>({onKeyDown:C(f)})}},Ks=({instance:e,params:t})=>{const s=Ot(t.id);return{getRootProps:()=>({id:s}),contextValue:{treeId:s,instance:e,multiSelect:t.multiSelect,disabledItemsFocusable:t.disabledItemsFocusable,icons:{defaultCollapseIcon:t.defaultCollapseIcon,defaultEndIcon:t.defaultEndIcon,defaultExpandIcon:t.defaultExpandIcon,defaultParentIcon:t.defaultParentIcon}}}},Vs=[Ps,ve,Pe,we,Bs,Ks],zs=["disabledItemsFocusable","expanded","defaultExpanded","onNodeToggle","onNodeFocus","disableSelection","defaultSelected","selected","multiSelect","onNodeSelect","id","defaultCollapseIcon","defaultEndIcon","defaultExpandIcon","defaultParentIcon","children"],$s=e=>{const{classes:t}=e;return Ee({root:["root"]},gs,t)},ze=K("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0}),te=g.forwardRef(function(t,s){const o=Ie({props:t,name:"MuiTreeView"}),a=o,i=o,{disabledItemsFocusable:d,expanded:r,defaultExpanded:p,onNodeToggle:c,onNodeFocus:h,disableSelection:x,defaultSelected:C,selected:f,multiSelect:l,onNodeSelect:u,id:m,defaultCollapseIcon:b,defaultEndIcon:T,defaultExpandIcon:N,defaultParentIcon:j,children:E}=i,A=Q(i,zs),{getRootProps:L,contextValue:z}=Cs({disabledItemsFocusable:d,expanded:r,defaultExpanded:p,onNodeToggle:c,onNodeFocus:h,disableSelection:x,defaultSelected:C,selected:f,multiSelect:l,onNodeSelect:u,id:m,defaultCollapseIcon:b,defaultEndIcon:T,defaultExpandIcon:N,defaultParentIcon:j,plugins:Vs,rootRef:s}),v=$s(o),$=Bt({elementType:ze,externalSlotProps:{},externalForwardedProps:A,className:v.root,getSlotProps:L,ownerState:a});return n.jsx(Es,{value:z,children:n.jsx(ze,I({},$,{children:E}))})}),Ze=()=>g.useContext(Ye);function Hs(e){const{instance:t,multiSelect:s}=Ze(),o=t?t.isNodeExpandable(e):!1,a=t?t.isNodeExpanded(e):!1,i=t?t.isNodeFocused(e):!1,d=t?t.isNodeSelected(e):!1,r=t?t.isNodeDisabled(e):!1;return{disabled:r,expanded:a,selected:d,focused:i,handleExpansion:x=>{if(t&&!r){i||t.focusNode(x,e);const C=s&&(x.shiftKey||x.ctrlKey||x.metaKey);o&&!(C&&t.isNodeExpanded(e))&&t.toggleNodeExpansion(x,e)}},handleSelection:x=>{t&&!r&&(i||t.focusNode(x,e),s&&(x.shiftKey||x.ctrlKey||x.metaKey)?x.shiftKey?t.selectRange(x,{end:e}):t.selectNode(x,e,!0):t.selectNode(x,e))},preventSelection:x=>{(x.shiftKey||x.ctrlKey||x.metaKey||r)&&x.preventDefault()}}}const Us=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],et=g.forwardRef(function(t,s){const{classes:o,className:a,displayIcon:i,expansionIcon:d,icon:r,label:p,nodeId:c,onClick:h,onMouseDown:x}=t,C=Q(t,Us),{disabled:f,expanded:l,selected:u,focused:m,handleExpansion:b,handleSelection:T,preventSelection:N}=Hs(c),j=r||d||i,E=L=>{N(L),x&&x(L)},A=L=>{b(L),T(L),h&&h(L)};return n.jsxs("div",I({},C,{className:je(a,o.root,l&&o.expanded,u&&o.selected,m&&o.focused,f&&o.disabled),onClick:A,onMouseDown:E,ref:s,children:[n.jsx("div",{className:o.iconContainer,children:j}),n.jsx("div",{className:o.label,children:p})]}))});function Ws(e){return Se("MuiTreeItem",e)}const B=Ne("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]),Gs=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],Xs=e=>{const{classes:t}=e;return Ee({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},Ws,t)},qs=K("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Ys=K(et,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${B.iconContainer}`]:t.iconContainer},t.label&&{[`& .${B.label}`]:t.label}]})(({theme:e})=>({padding:"0 8px",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${B.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${B.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${B.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ae(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ae(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ae(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${B.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ae(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${B.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${B.label}`]:I({paddingLeft:4,width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1)})),Js=K(Xe,{name:"MuiTreeItem",slot:"Group",overridesResolver:(e,t)=>t.group})({margin:0,padding:0,marginLeft:17}),M=g.forwardRef(function(t,s){const o=Ie({props:t,name:"MuiTreeItem"}),{children:a,className:i,collapseIcon:d,ContentComponent:r=et,ContentProps:p,endIcon:c,expandIcon:h,disabled:x,icon:C,id:f,label:l,nodeId:u,onClick:m,onMouseDown:b,TransitionComponent:T=Xe,TransitionProps:N}=o,j=Q(o,Gs),{icons:E,multiSelect:A,disabledItemsFocusable:L,treeId:z,instance:v}=Ze();let $;f!=null?$=f:z&&u&&($=`${z}-${u}`);const[Re,st]=g.useState(null),Le=g.useRef(null),nt=Ge(st,s),ot=g.useMemo(()=>({element:Re,id:u}),[u,Re]),{index:ce,parentId:_e}=js(ot),G=!!(Array.isArray(a)?a.length:a),se=v?v.isNodeExpanded(u):!1,Fe=v?v.isNodeFocused(u):!1,ue=v?v.isNodeSelected(u):!1,pe=v?v.isNodeDisabled(u):!1,fe=I({},o,{expanded:se,focused:Fe,selected:ue,disabled:pe}),D=Xs(fe);let ge,xe;G&&(se?xe=d||E.defaultCollapseIcon:xe=h||E.defaultExpandIcon),G?ge=E.defaultParentIcon:ge=c||E.defaultEndIcon,g.useEffect(()=>{if(v&&ce!==-1)return v.updateNode({id:u,idAttribute:$,index:ce,parentId:_e,expandable:G,disabled:x}),()=>v.removeNode(u)},[v,_e,ce,u,G,x,$]),g.useEffect(()=>{if(v&&l){var _,ne;return v.mapFirstChar(u,((_=(ne=Le.current)==null?void 0:ne.textContent)!=null?_:"").substring(0,1).toLowerCase())}},[v,u,l]);let he;A?he=ue:ue&&(he=!0);function rt(_){if(_.target===_.currentTarget){let me;typeof _.target.getRootNode=="function"?me=_.target.getRootNode():me=We(_.target),me.getElementById(z).focus({preventScroll:!0})}const ne=!L&&pe;v&&!Fe&&_.currentTarget===_.target&&!ne&&v.focusNode(_,u)}return n.jsxs(qs,I({className:je(D.root,i),role:"treeitem","aria-expanded":G?se:void 0,"aria-selected":he,"aria-disabled":pe||void 0,id:$,tabIndex:-1},j,{ownerState:fe,onFocus:rt,ref:nt,children:[n.jsx(Ys,I({as:r,ref:Le,classes:{root:D.content,expanded:D.expanded,selected:D.selected,focused:D.focused,disabled:D.disabled,iconContainer:D.iconContainer,label:D.label},label:l,nodeId:u,onClick:m,onMouseDown:b,icon:C,expansionIcon:xe,displayIcon:ge,ownerState:fe},p)),a&&n.jsx(Qe,{id:u,children:n.jsx(Js,I({as:T,unmountOnExit:!0,className:D.group,in:se,component:"ul",role:"group"},N,{children:a}))})]}))}),V=()=>n.jsxs(P,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"10px"},children:[n.jsx(Kt,{sx:{width:"1em !important",height:"1em !important"}}),n.jsx(R,{children:"Loading..."})]}),Qs=({dbs:e,tbl:t})=>{y.debug(e,t);const s=F(),o=S(r=>at(r,e,t));y.debug(o);const a=S(r=>lt(r,e,t));y.debug(a),g.useEffect(()=>{o||i()},[]);const i=()=>{O(k.appUrlTreeCls,{dbs:e,tbl:t},function(r){const p=r==null?void 0:r.data;y.debug("response data",p),s(it({dbs:e,tbl:t,cls:p}))})},d=g.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]);return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Table has no columns"})}):(y.debug(a),n.jsx(U,{columns:d,data:a,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}}})):n.jsx(V,{})},Zs=({dbs:e,tbl:t})=>{y.debug(e,t);const s=F(),o=S(r=>dt(r,e,t));y.debug(o);const a=S(r=>ct(r,e,t));y.debug(a),g.useEffect(()=>{o||i()},[]);const i=()=>{O(k.appUrlTreeIdx,{dbs:e,tbl:t},function(r){const p=r==null?void 0:r.data;y.debug("response data",p),s(ut({dbs:e,tbl:t,idx:p}))})},d=g.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]);return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Table has no indexes"})}):n.jsx(U,{columns:d,data:a,initialState:{density:"comfortable"},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}}}):n.jsx(V,{})};var H=(e=>(e[e.MANAGE=0]="MANAGE",e[e.EXPLORE=1]="EXPLORE",e))(H||{});const en=({dbs:e,tbl:t})=>{y.debug(e,t);const s=F(),o=S(r=>pt(r,e,t));y.debug(o);const a=S(r=>ft(r,e,t));y.debug(a),g.useEffect(()=>{o||i()},[]);const i=()=>{O(k.appUrlTreeTrg,{dbs:e,tbl:t},function(r){const p=r==null?void 0:r.data;y.debug("response data",p),s(gt({dbs:e,tbl:t,trg:p}))})},d=g.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:r})=>n.jsx("pre",{style:{padding:0,margin:0},children:r.getValue()})}],[]);return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Table has no triggers"})}):n.jsx(U,{columns:d,data:a,initialState:{density:"comfortable"},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}}}):n.jsx(V,{})},tn=({dbs:e,tbl:t})=>{y.debug(e,t);const s=F(),o=S(r=>xt(r,e,t));y.debug(o);const a=S(r=>ht(r,e,t));y.debug(a),g.useEffect(()=>{o||i()},[]);const i=()=>{O(k.appUrlTreeFrk,{dbs:e,tbl:t},function(r){const p=r==null?void 0:r.data;y.debug("response data",p),s(mt({dbs:e,tbl:t,frk:p}))})},d=g.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]);return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Table contains no foreign keys"})}):n.jsx(U,{columns:d,data:a,initialState:{density:"comfortable"},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}}}):n.jsx(V,{})};var J=(e=>(e[e.TABLE=0]="TABLE",e[e.VIEW=1]="VIEW",e))(J||{});const tt=({dbs:e,tbl:t,typ:s})=>{y.debug(e,t,s);const o=F();return n.jsx(M,{nodeId:t,label:n.jsxs(P,{color:"primary",sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"5px",opacity:s===J.TABLE?"1":"0.5"},children:[n.jsx(qt,{}),t]}),n.jsxs(P,{children:[n.jsx(Me,{title:"Settings",children:n.jsx(ye,{sx:{fontSize:"1em",color:"inherit",padding:"4px"},onClick:a=>{o(Ae({dbs:e,tbl:t,doaction:H.MANAGE})),a.preventDefault(),a.stopPropagation()},children:n.jsx(Yt,{})})}),n.jsx(Me,{title:"Explore",children:n.jsx(ye,{sx:{fontSize:"1em",color:"inherit",padding:"4px"},onClick:a=>{o(Ae({dbs:e,tbl:t,doaction:H.EXPLORE})),a.preventDefault(),a.stopPropagation()},children:n.jsx(Jt,{})})})]})]}),children:n.jsxs(te,{"aria-label":"Columns and indexes",defaultCollapseIcon:n.jsx(Z,{}),defaultExpandIcon:n.jsx(ee,{}),sx:{display:"grid",gap:"0"},children:[n.jsx(M,{nodeId:"columns",label:"Columns",sx:{padding:0,minWidth:0},children:n.jsx(Qs,{dbs:e,tbl:t})}),s===J.TABLE&&n.jsxs(n.Fragment,{children:[n.jsx(M,{nodeId:"indexes",label:"Indexes",sx:{padding:0,minWidth:0},children:n.jsx(Zs,{dbs:e,tbl:t})}),n.jsx(M,{nodeId:"foreignkeys",label:"Foreign Keys",sx:{padding:0,minWidth:0},children:n.jsx(tn,{dbs:e,tbl:t})}),n.jsx(M,{nodeId:"triggers",label:"Triggers",sx:{padding:0,minWidth:0},children:n.jsx(en,{dbs:e,tbl:t})})]})]})})},sn=({dbs:e,search:t})=>{const s=F();y.debug(e,t);const o=S(d=>bt(d,e));y.debug(o);const a=S(d=>yt(d,e));y.debug(a),g.useEffect(()=>{o||i()},[]);const i=()=>{O(k.appUrlTreeTbl,{dbs:e},function(d){const r=d==null?void 0:d.data;y.debug("response data",r),s(Ct({dbs:e,tbl:r}))})};return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Database contains no tables"})}):n.jsxs(te,{"aria-label":"Tables",defaultCollapseIcon:n.jsx(Z,{}),defaultExpandIcon:n.jsx(ee,{}),sx:{display:"grid",gap:"0"},children:[...a.map(d=>t!==""&&!d.toLowerCase().includes(t.toLowerCase())?null:n.jsx(tt,{dbs:e,tbl:d,typ:J.TABLE}))]}):n.jsx(V,{})},nn=({dbs:e,search:t})=>{const s=F();y.debug(e,t);const o=S(d=>Tt(d,e));y.debug(o),g.useEffect(()=>{o||i()},[]);const a=S(d=>Nt(d,e));y.debug(a);const i=()=>{O(k.appUrlTreeVws,{dbs:e},function(d){const r=d==null?void 0:d.data;y.debug("response data",r),s(St({dbs:e,vws:r}))})};return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Database contains no views"})}):n.jsxs(te,{"aria-label":"Views",defaultCollapseIcon:n.jsx(Z,{}),defaultExpandIcon:n.jsx(ee,{}),sx:{display:"grid",gap:"0"},children:[...a.map(d=>t!==""&&!d.toLowerCase().includes(t.toLowerCase())?null:n.jsx(tt,{dbs:e,tbl:d,typ:J.VIEW}))]}):n.jsx(V,{})},on=({dbs:e,search:t})=>{y.debug(e,t);const s=F(),o=S(r=>It(r,e));y.debug(o);const a=S(r=>jt(r,e));y.debug(a),g.useEffect(()=>{o||i()},[]);const i=()=>{O(k.appUrlTreePrc,{dbs:e},function(r){const p=r==null?void 0:r.data;y.debug("response data",p),s(Et({dbs:e,prc:p}))})},d=g.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:r})=>n.jsx("pre",{style:{padding:0,margin:0},children:r.getValue()})}],[]);return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Database contains no stored procedures"})}):n.jsx(U,{columns:d,data:a.filter(r=>t===""||r.routine_name.toLowerCase().includes(t.toLowerCase())),initialState:{density:"comfortable"},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}}}):n.jsx(V,{})},rn=({dbs:e,search:t})=>{y.debug(e,t);const s=F(),o=S(r=>vt(r,e));y.debug(o);const a=S(r=>Pt(r,e));y.debug(a),g.useEffect(()=>{o||i()},[]);const i=()=>{O(k.appUrlTreeFnc,{dbs:e},function(r){const p=r==null?void 0:r.data;y.debug("response data",p),s(wt({dbs:e,fnc:p}))})},d=g.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:r})=>n.jsx("pre",{style:{padding:0,margin:0},children:r.getValue()})}],[]);return o?o&&a.length===0?n.jsx(P,{sx:{padding:"var(--explorer-padding)"},children:n.jsx(R,{children:"Database contains no functions"})}):n.jsx(U,{columns:d,data:a.filter(r=>t===""||r.routine_name.toLowerCase().includes(t.toLowerCase())),initialState:{density:"comfortable"},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}}}):n.jsx(V,{})};var w=(e=>(e.WP="wp",e.LOCAL="local",e.REMOTE="remote",e.SYSTEM="system",e))(w||{});const an=({setShowFilter:e})=>{const t=F(),s=S(i=>$e(i));y.debug(s);const o=S(i=>He(i));y.debug(o);const a=()=>{localStorage.setItem("ppDbsTypes",JSON.stringify(s))};return n.jsxs(Zt,{sx:{position:"absolute",top:"4em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[n.jsx(fs,{title:"Database filter",sx:{textAlign:"center"}}),n.jsx(es,{sx:{textAlign:"center",padding:"0 1em 1em 0"},children:n.jsxs(P,{sx:{display:"inline-grid",textAlign:"left"},children:[n.jsx(le,{children:n.jsxs(ie,{children:[n.jsx(de,{checked:s.includes(w.WP),onChange:(i,d)=>{t(d?oe({dbsType:w.WP}):re({dbsType:w.WP}))}}),"WordPress database"]})}),n.jsx(le,{children:n.jsxs(ie,{children:[n.jsx(de,{checked:s.includes(w.LOCAL),onChange:(i,d)=>{t(d?oe({dbsType:w.LOCAL}):re({dbsType:w.LOCAL}))}}),"Local databases"]})}),n.jsx(le,{children:n.jsxs(ie,{children:[n.jsx(de,{checked:s.includes(w.REMOTE),onChange:(i,d)=>{t(d?oe({dbsType:w.REMOTE}):re({dbsType:w.REMOTE}))}}),"Remote databases"]})}),n.jsx(le,{children:n.jsxs(ie,{children:[n.jsx(de,{checked:s.includes(w.SYSTEM),onChange:(i,d)=>{t(d?oe({dbsType:w.SYSTEM}):re({dbsType:w.SYSTEM}))}}),"System databases"]})})]})}),n.jsxs(ts,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[n.jsx(De,{variant:"contained",onClick:()=>a(),children:"Remember"}),n.jsx(De,{variant:"contained",onClick:()=>e(!1),children:"OK"})]})]})},q=({search:e,setSearch:t,addFilter:s})=>{const[o,a]=g.useState(!1);return n.jsxs(P,{sx:{position:"relative"},children:[n.jsx(ss,{value:e,onChange:i=>{t(i.target.value)},onClick:i=>{i.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:n.jsx(ke,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:n.jsx(Vt,{})}),endAdornment:n.jsx(n.Fragment,{children:s&&n.jsx(ke,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:n.jsx(ye,{onClick:()=>{a(!o)},children:n.jsx(zt,{})})})})}}),o&&n.jsx(an,{setShowFilter:a})]})},ln=({dbs:e})=>{const[t,s]=g.useState(!1),[o,a]=g.useState("");y.debug(t,o);const[i,d]=g.useState(!1),[r,p]=g.useState("");y.debug(i,r);const[c,h]=g.useState(!1),[x,C]=g.useState("");y.debug(c,x);const[f,l]=g.useState(!1),[u,m]=g.useState("");return y.debug(f,u),n.jsxs(te,{"aria-label":"Databases",defaultCollapseIcon:n.jsx(Z,{}),defaultExpandIcon:n.jsx(ee,{}),sx:{display:"grid",gap:"0"},children:[n.jsx(M,{nodeId:"tables",onClick:()=>{s(!t)},label:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{children:"Tables"}),n.jsx("div",{children:t&&n.jsx(q,{search:o,setSearch:a})})]}),sx:{padding:0,minWidth:0},children:n.jsx(sn,{dbs:e,search:o})}),n.jsx(M,{nodeId:"view",onClick:()=>{d(!i)},label:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{children:"Views"}),n.jsx("div",{children:i&&n.jsx(q,{search:r,setSearch:p})})]}),sx:{padding:0,minWidth:0},children:n.jsx(nn,{dbs:e,search:r})}),n.jsx(M,{nodeId:"procedures",onClick:()=>{h(!c)},label:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{children:"Stored Procedures"}),n.jsx("div",{children:c&&n.jsx(q,{search:x,setSearch:C})})]}),sx:{padding:0,minWidth:0},children:n.jsx(on,{dbs:e,search:x})}),n.jsx(M,{nodeId:"functions",onClick:()=>{l(!f)},label:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{children:"Functions"}),n.jsx("div",{children:f&&n.jsx(q,{search:u,setSearch:m})})]}),sx:{padding:0,minWidth:0},children:n.jsx(rn,{dbs:e,search:u})})]})},dn=g.lazy(()=>Ue(()=>import("./Alert-7fb10588.js"),["./Alert-7fb10588.js","./main.js","./main-a9f78bc8.css","./index.esm-df7700a0.js","./iconBase-8840166b.js","./AdminTheme-ba57f315.js","./AlertTitle-902c49a6.js","./createSvgIcon-d0cfe483.js","./Close-9e29875c.js"],import.meta.url)),cn=g.lazy(()=>Ue(()=>import("./Settings-e98a2f03.js"),["./Settings-e98a2f03.js","./main.js","./main-a9f78bc8.css","./settings-04aa9e8b.js","./iconBase-8840166b.js","./MetaData-bdfb949d.js","./Switch-9746da4d.js","./Select-2486f905.js","./FormHelperText-d043b602.js","./FormControl-5d7bce62.js","./createSvgIcon-d0cfe483.js","./Close-9e29875c.js","./Chip-505aa5a1.js","./FormControlLabel-b874e6c1.js","./settings-711afc4e.css","./AdminTheme-ba57f315.js","./index.esm-df7700a0.js","./Actions-b625cbe1.js","./ConfirmDialog-c5a9ed7e.js","./DialogContent-0fdbfaca.js","./DialogTitle-3605c73e.js","./Button-e7d59fde.js","./RadioGroup-04724101.js","./Radio-4f834152.js","./TextField-0f586f77.js","./CardContent-eb18906e.js"],import.meta.url)),Kn=()=>{const e=F(),[t,s]=g.useState(""),o=S(c=>Rt(c));y.debug(o);const a=S(c=>He(c));y.debug(a);const i=S(c=>Lt(c));y.debug(i);const d=S(c=>_t(c));y.debug(d);const r=S(c=>$e(c));y.debug(r),g.useEffect(()=>{p()},[]);const p=()=>{let c=[];const h=localStorage.getItem("ppDbsTypes");h!==null?c=JSON.parse(h):c=[w.WP,w.LOCAL,w.REMOTE],O(k.appUrlTreeDbs,{},function(x){const C=x==null?void 0:x.data;y.debug("response data",C);const f=[];C.map(u=>{f.push(u.dbs)}),e(Mt({dbs:f,dbsTypes:c}));const l={};C.map(u=>{l[u.dbs]=u.dbs_type}),e(Dt({dbs:l}))})};return o===void 0?null:n.jsxs($t,{theme:ns(),children:[n.jsx(P,{sx:{marginBottom:"30px"},children:n.jsx(Ht,{position:"relative",sx:{borderRadius:"4px"},children:n.jsxs(Ut,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"12px !important"},children:[n.jsx(P,{sx:{fontSize:"18px",lineHeight:"18px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Data Explorer"}),n.jsx(P,{sx:{visibility:a!==void 0&&a.action===H.EXPLORE?"hidden":"visible"},children:n.jsx(q,{search:t,setSearch:s,addFilter:!0})})]})})}),i!==""&&n.jsx(P,{sx:{marginBottom:"30px"},children:n.jsx(g.Suspense,{children:n.jsx(dn,{severity:"error",message:i,close:!0,setClose:()=>{e(Ft({error:""}))}})})}),n.jsx(te,{"aria-label":"Data Explorer",defaultCollapseIcon:n.jsx(Z,{}),defaultExpandIcon:n.jsx(ee,{}),sx:{display:(a==null?void 0:a.action)===H.EXPLORE?"none":"grid",gap:"0"},children:Object.keys(o).map(c=>r.includes(d[c])===!1||t!==""&&!c.toLowerCase().includes(t.toLowerCase())?null:n.jsx(M,{nodeId:c,label:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"5px"},children:[n.jsx(Qt,{}),c]}),sx:{padding:"0"},children:n.jsx(ln,{dbs:c})},c))}),a!==void 0&&a.action===H.EXPLORE&&n.jsx("div",{className:"pp-container",children:n.jsx(Wt,{appId:At(),dbs:a.dbs,tbl:a.tbl,exploring:!0})}),a!==void 0&&a.action===H.MANAGE&&n.jsx(g.Suspense,{fallback:n.jsx(Gt,{title:"Loading settings..."}),children:n.jsx(cn,{dbs:a.dbs,tbl:a.tbl})})]})};export{Kn as default};
