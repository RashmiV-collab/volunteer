jQuery(function(){var e=!1;jQuery("form.checkout").on("checkout_place_order_stripe",function(){if(e)return e=!1,!0;if(!jQuery("#payment_method_stripe").is(":checked"))return!0;if(jQuery("input[name=stripe_card_id]").length>0&&"new"!=jQuery("input[name=stripe_card_id]:checked").val())return!0;if(1===jQuery("input#terms").size()&&0===jQuery("input#terms:checked").size())return alert(wc_stripe_params.i18n_terms),!1;if($required_inputs=jQuery(".woocommerce-billing-fields .address-field.validate-required"),$required_inputs.size()){var r=!1;if($required_inputs.each(function(){""===jQuery(this).find("input.input-text").val()&&(r=!0)}),r)return alert(wc_stripe_params.i18n_required_fields),!1}var i=jQuery("form.checkout, form#order_review, form#add_payment_method"),t=jQuery("#stripe_new_card"),a=i.find("input.stripe_token");a.val("");var n=function(r){i.find("input.stripe_token").remove(),i.append("<input type='hidden' class='stripe_token' name='stripe_token' value='"+r.id+"'/>"),e=!0,i.submit()};return StripeCheckout.open({key:wc_stripe_params.key,billingAddress:!1,amount:t.data("amount"),name:t.data("name"),description:t.data("description"),panelLabel:t.data("label"),currency:t.data("currency"),image:t.data("image"),bitcoin:t.data("bitcoin"),locale:t.data("locale"),email:jQuery("#billing_email").val()||t.data("email"),token:n}),!1})});