var GuestListsDashboard=function(){return{init:function(){jQuery(".group-dashboard-action-delete").length>0&&(jQuery(".group-dashboard-action-delete").css({cursor:"pointer"}),jQuery(".group-dashboard-action-delete").on("click",GuestListsDashboard.confirmation.showDialogGroup)),jQuery(".guest-dashboard-action-delete").length>0&&(jQuery(".guest-dashboard-action-delete").css({cursor:"pointer"}),jQuery(".guest-dashboard-action-delete").on("click",GuestListsDashboard.confirmation.showDialogGuestLists)),jQuery(".event-manager-select-chosen").length>0&&jQuery(".event-manager-select-chosen").chosen(),jQuery(".guest_checkin").on("click",GuestListsDashboard.actions.updateCheckin),jQuery(".guest_uncheckin").on("click",GuestListsDashboard.actions.updateCheckin),jQuery(".wpem-event-guest-lists-field select#event_id").length>0&&jQuery(".wpem-event-guest-lists-field select#event_id").on("change",GuestListsDashboard.actions.getGroupByEventID),jQuery("#wpem-group-dashboard .wpem-group-dashboard-filter-toggle select#event_id").length>0&&jQuery("#wpem-group-dashboard .wpem-group-dashboard-filter-toggle select#event_id").on("change",GuestListsDashboard.actions.getGroupByEventID),jQuery(".wpem-event-guest-lists-field select#group_id").length>0&&jQuery(".wpem-event-guest-lists-field select#group_id").on("change",GuestListsDashboard.actions.getGroupFieldByGroupID),jQuery("body").on("change","#wpem-guest-dashboard input.guest-list",GuestListsDashboard.actions.selectGuests),jQuery("body").on("change","#wpem-guest-dashboard #all_select",GuestListsDashboard.actions.allSelectGuests),jQuery(".guest-list").length>0&&jQuery("body").on("click","#guest_delete",function(){confirm(wpem_guest_lists_dashboard.i18n_confirm_guest_lists_delete)&&GuestListsDashboard.actions.deleteGuests()})},actions:{updateCheckin:function(e){jQuery(this).closest("span").add(jQuery(this).closest("td").find(".wpem-checkin-hide")).toggleClass("wpem-checkin-hide");var t=jQuery(this).data("value"),s=jQuery(this).data("post-id"),i=jQuery("input[name=event_id]").val(),i=jQuery(this).data("event-id"),a=jQuery(this).data("source");jQuery.ajax({type:"POST",url:wpem_guest_lists_dashboard.ajax_url,data:{check_in_value:t,guest_id:s,event_id:i,source:a,action:"update_event_guest_checkin_data",security:wpem_guest_lists_dashboard.wpem_guests_security},beforeSend:function(e,t){},success:function(e){},error:function(e,t,s){},complete:function(e,t){}}),e.preventDefault()},getGroupByEventID:function(e){var t=jQuery(this).val();jQuery.ajax({url:wpem_guest_lists_dashboard.ajax_url,type:"POST",dataType:"HTML",data:{action:"get_group_by_event_id",event_id:t,security:wpem_guest_lists_dashboard.wpem_guests_security},success:function(e){jQuery("select#group_id").html(e)}})},getGroupFieldByGroupID:function(e){var t=jQuery(this).val();jQuery.ajax({url:wpem_guest_lists_dashboard.ajax_url,type:"POST",dataType:"HTML",data:{action:"get_group_fields_by_group_id",group_id:t,security:wpem_guest_lists_dashboard.wpem_guests_security},success:function(e){console.log(e);var t=JSON.parse(e);jQuery('.wpem-event-guest-lists-field fieldset[class*="fieldset"]').hide(),jQuery('.wpem-event-guest-lists-field fieldset[class*="fieldset"]').each(function(e){jQuery(this).find("input").attr("required",!1)}),jQuery.each(t,function(e,t){jQuery(".wpem-event-guest-lists-field fieldset.fieldset-"+t).show(),jQuery(".wpem-event-guest-lists-field fieldset.fieldset-"+t+"#"+t).attr("required","true")})}})},selectGuests:function(e){var t=[];jQuery.each(jQuery("#wpem-guest-dashboard input.guest-list:checked"),function(){t.push(jQuery(this).val())}),jQuery("#wpem-guest-dashboard input#guests_ids").val(t.toString())},allSelectGuests:function(e){!0==jQuery(e.target).prop("checked")?jQuery('#wpem-guest-dashboard input[type="checkbox"]').prop("checked",!0):!1==jQuery(e.target).prop("checked")&&jQuery('#wpem-guest-dashboard input[type="checkbox"]').prop("checked",!1);var t=[];jQuery.each(jQuery("#wpem-guest-dashboard input.guest-list:checked"),function(){t.push(jQuery(this).val())}),jQuery("#wpem-guest-dashboard input#guests_ids").val(t.toString())},deleteGuests:function(){var e=jQuery("#wpem-guest-dashboard input#guests_ids").val();jQuery.ajax({url:wpem_guest_lists_dashboard.ajax_url,type:"POST",dataType:"HTML",data:{action:"delete_guests",delete_guests_id:e,security:wpem_guest_lists_dashboard.wpem_guests_security},success:function(e){location.reload(!0)}})}},confirmation:{showDialogGroup:function(e){return confirm(wpem_guest_lists_dashboard.i18n_confirm_group_delete)},showDialogGuestLists:function(e){return confirm(wpem_guest_lists_dashboard.i18n_confirm_guest_lists_delete)}}}};GuestListsDashboard=GuestListsDashboard(),jQuery(document).ready(function(e){GuestListsDashboard.init();var t=jQuery(".wpem-event-guest-lists-field select#group_id").val();t&&jQuery.ajax({url:wpem_guest_lists_dashboard.ajax_url,type:"POST",dataType:"HTML",data:{action:"get_group_fields_by_group_id",group_id:t,security:wpem_guest_lists_dashboard.wpem_guests_security},success:function(e){console.log(e);var t=JSON.parse(e);jQuery('.wpem-event-guest-lists-field fieldset[class*="fieldset"]').hide(),jQuery('.wpem-event-guest-lists-field fieldset[class*="fieldset"]').each(function(e){jQuery(this).find("input").attr("required",!1)}),jQuery.each(t,function(e,t){jQuery(".wpem-event-guest-lists-field fieldset.fieldset-"+t).show(),jQuery(".wpem-event-guest-lists-field fieldset.fieldset-"+t+"#"+t).attr("required","true")})}})});